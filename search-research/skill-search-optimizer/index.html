<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Optimize agent skills">
  <title>skill-search-optimizer - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/search-research/skill-search-optimizer/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/search-research/" class="back-link">‚Üê Back to Search & Research</a>
              <div class="skill-page-meta">
                <a href="/search-research/" class="skill-page-category">Search & Research</a>
                <span class="skill-page-author">by @gitgoodordietrying</span>
              </div>
              <h1 class="skill-page-title">skill-search-optimizer</h1>
              <p class="skill-page-desc">Optimize agent skills</p>
              <div class="vote-widget skill-page-vote" data-category-id="search-research" data-tool-id="skill-search-optimizer">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote skill-search-optimizer">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote skill-search-optimizer">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>Skill Search Optimizer</h1>
<p>Optimize skills for discoverability on the ClawdHub registry. Covers how search works, how to write descriptions that rank well, content strategies for semantic matching, testing visibility, and competitive positioning.</p>
<h2>When to Use</h2>
<ul>
<li>A published skill isn&#39;t appearing in relevant searches</li>
<li>Writing a skill description for maximum discoverability</li>
<li>Understanding how ClawdHub&#39;s search indexes and ranks skills</li>
<li>Comparing your skill&#39;s visibility against competitors</li>
<li>Improving an existing skill&#39;s search performance</li>
</ul>
<h2>How ClawdHub Search Works</h2>
<h3>Architecture</h3>
<p>ClawdHub uses <strong>vector-based semantic search</strong>, not keyword matching:</p>
<pre><code>User query ‚Üí OpenAI embedding ‚Üí Vector similarity search ‚Üí Ranked results
             (text-embedding-*)    (Convex vector index)
</code></pre>
<p>Key implications:</p>
<ol>
<li><strong>Meaning matters more than exact keywords</strong> ‚Äî &quot;container debugging&quot; matches &quot;Docker troubleshooting&quot;</li>
<li><strong>But keywords still help</strong> ‚Äî the embedding model encodes specific terms with high signal</li>
<li><strong>Description is the primary indexed field</strong> ‚Äî content may contribute but description is dominant</li>
<li><strong>Short queries match broad descriptions</strong> ‚Äî &quot;docker&quot; matches skills about containers generally</li>
<li><strong>Specific queries match specific descriptions</strong> ‚Äî &quot;debug crashed Docker container&quot; favors skills that mention debugging and crashes</li>
</ol>
<h3>What Gets Indexed</h3>
<pre><code>PRIMARY:   description field (frontmatter)
SECONDARY: name/slug field
TERTIARY:  skill content (body markdown) ‚Äî likely summarized or truncated before embedding

The description field is your search ranking. Everything else is secondary.
</code></pre>
<h3>Search API</h3>
<pre><code class="language-bash"># How search is called internally
# POST https://clawdhub.com/api/cli/search
# Body: { &quot;query&quot;: &quot;user search terms&quot;, &quot;limit&quot;: 10 }
# Returns: ranked list of skills with similarity scores

# CLI search
npx molthub@latest search &quot;your query&quot;
</code></pre>
<h2>Description Optimization</h2>
<h3>The anatomy of a high-ranking description</h3>
<pre><code class="language-yaml"># Pattern:
# [Action verb] + [specific scope]. Use when [trigger 1], [trigger 2], [trigger 3].
# Also covers [related topic].

# Example (strong):
description: &gt;-
  Schedule and manage recurring tasks with cron and systemd timers.
  Use when setting up cron jobs, writing systemd timer units,
  handling timezone-aware scheduling, monitoring failed jobs,
  implementing retry patterns, or debugging why a scheduled task didn&#39;t run.

# Why it works:
# - &quot;Schedule and manage recurring tasks&quot; ‚Üí broad match for scheduling queries
# - &quot;cron and systemd timers&quot; ‚Üí exact match for specific tool queries
# - &quot;Use when...&quot; triggers ‚Üí matches natural-language questions
# - &quot;debugging why a scheduled task didn&#39;t run&quot; ‚Üí matches troubleshooting queries
</code></pre>
<h3>Description formulas</h3>
<h4>Formula 1: Tool-focused skill</h4>
<pre><code class="language-yaml">description: &gt;-
  [Verb] with [tool/technology]. Use when [task 1], [task 2], [task 3].
  Covers [sub-topic 1], [sub-topic 2], and [sub-topic 3].
</code></pre>
<p>Example:</p>
<pre><code class="language-yaml">description: &gt;-
  Debug Docker containers and Compose stacks. Use when inspecting
  container logs, diagnosing networking issues, troubleshooting
  build failures, or investigating resource usage. Covers exec,
  health checks, multi-stage builds, and distroless containers.
</code></pre>
<h4>Formula 2: Pattern/reference skill</h4>
<pre><code class="language-yaml">description: &gt;-
  [Topic] patterns for [scope]. Use when [task 1], [task 2], [task 3].
  Also covers [related scope].
</code></pre>
<p>Example:</p>
<pre><code class="language-yaml">description: &gt;-
  Regex patterns for validation, parsing, and text extraction across
  JavaScript, Python, Go, and grep. Use when writing regex for emails,
  URLs, IPs, dates, or custom formats. Also covers lookahead,
  lookbehind, and search-and-replace for code refactoring.
</code></pre>
<h4>Formula 3: Workflow/process skill</h4>
<pre><code class="language-yaml">description: &gt;-
  [Process description] from [start] to [end]. Use when [scenario 1],
  [scenario 2], [scenario 3].
</code></pre>
<p>Example:</p>
<pre><code class="language-yaml">description: &gt;-
  CI/CD pipeline configuration from commit to deployment. Use when
  setting up GitHub Actions, creating matrix builds, caching
  dependencies, building Docker images, or managing deployment secrets.
</code></pre>
<h3>Keyword strategy</h3>
<p>Semantic search understands synonyms, but being explicit helps:</p>
<pre><code class="language-yaml"># Include both the formal term AND common synonyms
description: &gt;-
  SSH tunneling and port forwarding for remote access.
  Use when creating SSH tunnels, setting up port forwards,
  connecting through jump hosts (bastion hosts), managing
  SSH keys, or transferring files with scp and rsync.

# &quot;tunneling&quot; and &quot;port forwarding&quot; are related but distinct queries
# &quot;jump hosts&quot; and &quot;bastion hosts&quot; are synonyms ‚Äî include both
# &quot;scp and rsync&quot; catches file transfer queries
</code></pre>
<p>Terms to include:</p>
<ul>
<li><strong>Primary tool names</strong>: <code>docker</code>, <code>git</code>, <code>curl</code>, <code>make</code></li>
<li><strong>Action verbs</strong>: <code>debug</code>, <code>test</code>, <code>deploy</code>, <code>monitor</code>, <code>parse</code></li>
<li><strong>Common synonyms</strong>: <code>container</code> / <code>Docker</code>, <code>CI/CD</code> / <code>pipeline</code> / <code>GitHub Actions</code></li>
<li><strong>Problem descriptions</strong>: <code>debugging why X doesn&#39;t work</code>, <code>troubleshooting Y</code></li>
</ul>
<h3>Description length</h3>
<pre><code>TOO SHORT (&lt; 50 chars):
  &quot;Make things with Makefiles&quot;
  ‚Üí Not enough semantic surface for the embedding model

SWEET SPOT (80-200 chars):
  &quot;Write Makefiles for any project type. Use when setting up build
   automation, defining multi-target builds, or using Make for Go,
   Python, Docker, and Node.js. Also covers Just and Task.&quot;
  ‚Üí Rich semantic content, multiple match angles

TOO LONG (&gt; 250 chars):
  [Long paragraph trying to list everything]
  ‚Üí Gets truncated in search results display
  ‚Üí Dilutes the embedding with low-signal words
  ‚Üí Harder to read in listings
</code></pre>
<h2>Content Optimization</h2>
<h3>How body content affects search</h3>
<p>The skill body (markdown content after frontmatter) likely contributes to search in two ways:</p>
<ol>
<li><strong>Skill preview/summary</strong>: The registry may extract or summarize content for display</li>
<li><strong>Secondary embedding signal</strong>: Full content may be embedded separately or appended to description</li>
</ol>
<p>Optimization strategy:</p>
<ul>
<li><strong>Front-load important terms</strong> in the first paragraph after the title</li>
<li><strong>Use headings that match search queries</strong> ‚Äî &quot;## Encode and Decode&quot; matches better than &quot;## Section 2&quot;</li>
<li><strong>Repeat key terms naturally</strong> throughout the document (don&#39;t stuff, but don&#39;t avoid them either)</li>
</ul>
<pre><code class="language-markdown"># GOOD: Heading matches likely search query
## Port Forwarding
## Key Management
## Connection Debugging

# BAD: Generic headings with no search value
## Getting Started
## Advanced Usage
## Miscellaneous
</code></pre>
<h3>First paragraph optimization</h3>
<p>The first paragraph after the title is prime search real estate:</p>
<pre><code class="language-markdown"># GOOD
# SSH Tunnel

Create and manage SSH tunnels for secure remote access. Covers local,
remote, and dynamic port forwarding, jump hosts, key management,
agent forwarding, and file transfers with scp and rsync.

# BAD
# SSH Tunnel

This skill provides information about SSH.
</code></pre>
<h2>Testing Search Visibility</h2>
<h3>Manual testing</h3>
<pre><code class="language-bash"># Test with the exact queries users would type

# Broad query (should your skill appear?)
npx molthub@latest search &quot;docker&quot;
npx molthub@latest search &quot;testing&quot;
npx molthub@latest search &quot;build automation&quot;

# Specific query (should your skill rank #1?)
npx molthub@latest search &quot;debug docker container&quot;
npx molthub@latest search &quot;write makefile for go project&quot;
npx molthub@latest search &quot;cron job not running&quot;

# Problem-oriented query (does your skill match troubleshooting?)
npx molthub@latest search &quot;container networking not working&quot;
npx molthub@latest search &quot;why is my cron job not executing&quot;

# Synonym query (does your skill match alternative terms?)
npx molthub@latest search &quot;bastion host&quot; # should match ssh-tunnel
npx molthub@latest search &quot;scheduled task&quot; # should match cron-scheduling
</code></pre>
<h3>Test matrix</h3>
<p>Build a test matrix for your skill:</p>
<pre><code>SEARCH VISIBILITY MATRIX
Skill: [your-skill-slug]

Query                              | Appears? | Rank | Competitor
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
[broad term]                       | Y/N      | #__  | [who ranks above]
[specific use case]                | Y/N      | #__  | [who ranks above]
[problem/troubleshooting query]    | Y/N      | #__  | [who ranks above]
[synonym for main topic]           | Y/N      | #__  | [who ranks above]
[related but different topic]      | Y/N      | #__  | [expected?]

TARGET: Appear in top 3 for specific queries, top 10 for broad queries
</code></pre>
<h3>Iterative improvement</h3>
<pre><code class="language-bash"># 1. Publish initial version
npx molthub@latest publish ./skills/my-skill \
  --slug my-skill --name &quot;My Skill&quot; --version 1.0.0

# 2. Test search visibility
npx molthub@latest search &quot;primary query&quot;
npx molthub@latest search &quot;secondary query&quot;

# 3. If ranking is poor, update the description
# Edit SKILL.md frontmatter

# 4. Publish updated version
npx molthub@latest publish ./skills/my-skill \
  --slug my-skill --name &quot;My Skill&quot; --version 1.0.1 \
  --changelog &quot;Improve description for search visibility&quot;

# 5. Re-test (embeddings update on publish)
npx molthub@latest search &quot;primary query&quot;
</code></pre>
<h2>Competitive Positioning</h2>
<h3>Analyzing competing skills</h3>
<pre><code class="language-bash"># Find skills in your category
npx molthub@latest search &quot;your topic&quot;

# For each competing skill:
# 1. Install it
npx molthub@latest install competitor-skill

# 2. Read the description
head -10 skills/competitor-skill/SKILL.md

# 3. Compare:
#    - Does their description cover queries yours doesn&#39;t?
#    - Are they using terms you should add?
#    - What&#39;s their content depth vs. yours?
</code></pre>
<h3>Differentiation strategies</h3>
<pre><code>STRATEGY 1: Broader scope
  Competitor covers Docker. You cover Docker + Podman + containerd.
  Your description mentions all three ‚Üí matches more queries.

STRATEGY 2: Deeper specificity
  Competitor covers &quot;git commands&quot;. You cover &quot;git workflows&quot; with
  specific scenarios like bisect, worktree, and reflog recovery.
  Your description matches specific troubleshooting queries.

STRATEGY 3: Problem-oriented framing
  Competitor: &quot;Docker container management&quot;
  You: &quot;Debug Docker containers ‚Äî logs, networking, crashes, resource issues&quot;
  Problem-oriented descriptions match how people actually search.

STRATEGY 4: Cross-tool coverage
  Competitor covers Make only. You cover Make + Just + Task.
  Your description mentions all three ‚Üí broader match surface.
</code></pre>
<h3>Filling gaps vs. competing head-on</h3>
<pre><code>MARKET ANALYSIS:

1. Search for your intended topic
2. Count results:
   0 results ‚Üí Blue ocean. Any reasonable skill will rank #1.
   1-2 results ‚Üí Low competition. A better skill wins easily.
   3+ results ‚Üí Competitive. Need clear differentiation.

For competitive categories, check the existing skills&#39; quality:
- Are their descriptions optimized? (Many aren&#39;t)
- Are their examples working? (Test a few)
- Do they cover the full scope? (Often they&#39;re narrow)

A well-written skill with an optimized description will outrank
a mediocre skill even in a competitive category.
</code></pre>
<h2>Registry Dynamics</h2>
<h3>Search behavior patterns</h3>
<pre><code>COMMON SEARCH PATTERNS:

1. Tool name: &quot;docker&quot;, &quot;git&quot;, &quot;terraform&quot;
   ‚Üí Match with explicit tool name in description

2. Task description: &quot;deploy to production&quot;, &quot;parse CSV&quot;
   ‚Üí Match with action verbs and task phrases

3. Problem statement: &quot;container not starting&quot;, &quot;cron job failed&quot;
   ‚Üí Match with troubleshooting language in description

4. Comparison: &quot;jest vs vitest&quot;, &quot;make vs just&quot;
   ‚Üí Match by mentioning multiple tools in description

5. How-to: &quot;how to set up CI/CD&quot;, &quot;how to forward ports&quot;
   ‚Üí Match with &quot;Use when setting up...&quot; pattern
</code></pre>
<h3>Timing and freshness</h3>
<pre><code>- New skills get indexed immediately on publish
- Updated skills get re-indexed on version bump
- No known freshness bias (older skills don&#39;t rank lower)
- The registry is young ‚Äî early publishers have first-mover advantage
- Slug ownership is permanent ‚Äî claim good slugs early
</code></pre>
<h2>Optimization Checklist</h2>
<pre><code>PRE-PUBLISH SEARCH OPTIMIZATION:

[ ] Description follows the [Action] + [Scope] + [Use when] pattern
[ ] Description is 80-200 characters
[ ] Primary tool/topic names are in the description explicitly
[ ] Common synonyms are included (jump host / bastion host)
[ ] Troubleshooting/problem language is included
[ ] Action verbs match how users search (debug, test, deploy, parse)
[ ] First paragraph after title reinforces key terms
[ ] Section headings use searchable phrases, not generic labels
[ ] Slug is descriptive and matches the primary search term
[ ] No competing skill has a clearly better description for the same queries

POST-PUBLISH VERIFICATION:

[ ] Skill appears in top 3 for its primary specific query
[ ] Skill appears in top 10 for its broad category query
[ ] Skill appears for at least one synonym/alternative query
[ ] Skill appears for at least one problem-oriented query
</code></pre>
<h2>Tips</h2>
<ul>
<li>The description field is worth more than the entire rest of the skill for search ranking. Spend 30% of your optimization effort on those 1-2 sentences.</li>
<li>&quot;Use when...&quot; phrases in descriptions are powerful because they match how users naturally frame searches: &quot;I need something for when X happens.&quot;</li>
<li>Include both the specific tool name AND the general category. &quot;Docker containers&quot; matches both &quot;docker&quot; queries and &quot;container&quot; queries. Just &quot;Docker&quot; misses people searching for &quot;container debugging.&quot;</li>
<li>Problem-oriented language (&quot;debugging why X fails&quot;, &quot;troubleshooting Y&quot;) matches a huge category of searches that purely descriptive skills miss entirely.</li>
<li>Test with at least 5 different search queries before publishing. If your skill doesn&#39;t appear for its own primary topic, the description needs work.</li>
<li>Slug names contribute to search matching. <code>container-debug</code> is better than <code>cd-tool</code> because the slug itself contains searchable terms.</li>
<li>Don&#39;t optimize for queries your skill can&#39;t actually answer. Ranking for a query and then disappointing the user is worse than not ranking at all ‚Äî it leads to reports and uninstalls.</li>
<li>The registry is young. First-mover advantage is real ‚Äî claim descriptive slugs and publish quality content now while competition is low.</li>
<li>Re-publish with a version bump after optimizing your description. The embedding is regenerated on each publish, so description changes take effect immediately.</li>
</ul>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/gitgoodordietrying/skill-search-optimizer/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/gitgoodordietrying/skill-search-optimizer" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/gitgoodordietrying/skill-search-optimizer/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@gitgoodordietrying</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Search & Research</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>