<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Mobile browser and native app automation via ATL (iOS Simulator)">
  <title>atl-mobile - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/browser-automation/atl-mobile/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/browser-automation/" class="back-link">‚Üê Back to Browser & Automation</a>
              <div class="skill-page-meta">
                <a href="/browser-automation/" class="skill-page-category">Browser & Automation</a>
                <span class="skill-page-author">by @jordancoin</span>
              </div>
              <h1 class="skill-page-title">atl-mobile</h1>
              <p class="skill-page-desc">Mobile browser and native app automation via ATL (iOS Simulator)</p>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>ATL ‚Äî Agent Touch Layer</h1>
<blockquote>
<p>The automation layer between AI agents and iOS</p>
</blockquote>
<p>ATL provides HTTP-based automation for iOS Simulator ‚Äî both <strong>browser</strong> (mobile Safari) and <strong>native apps</strong>. Think Playwright, but for mobile.</p>
<h2>üîÄ Two Servers: Browser &amp; Native</h2>
<p>ATL uses <strong>two separate servers</strong> for browser and native app automation:</p>
<table>
<thead>
<tr>
<th>Server</th>
<th>Port</th>
<th>Use Case</th>
<th>Key Commands</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Browser</strong></td>
<td><code>9222</code></td>
<td>Web automation in mobile Safari</td>
<td><code>goto</code>, <code>markElements</code>, <code>clickMark</code>, <code>evaluate</code></td>
</tr>
<tr>
<td><strong>Native</strong></td>
<td><code>9223</code></td>
<td>iOS app automation (Settings, Contacts, any app)</td>
<td><code>openApp</code>, <code>snapshot</code>, <code>tapRef</code>, <code>find</code></td>
</tr>
</tbody></table>
<pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  BROWSER SERVER (9222)     ‚îÇ     NATIVE SERVER (9223)      ‚îÇ
‚îÇ  (mobile Safari/WebView)   ‚îÇ     (iOS apps via XCTest)     ‚îÇ
‚îÇ                            ‚îÇ                                ‚îÇ
‚îÇ  markElements + clickMark  ‚îÇ     snapshot + tapRef         ‚îÇ
‚îÇ  CSS selectors             ‚îÇ     accessibility tree        ‚îÇ
‚îÇ  DOM evaluation            ‚îÇ     element references        ‚îÇ
‚îÇ  tap, swipe, screenshot    ‚îÇ     tap, swipe, screenshot    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
<p><strong>Why two ports?</strong> Native app automation requires XCTest APIs (XCUIApplication, XCUIElement) which are only available in UI Test bundles. The native server runs as a UI Test that exposes an HTTP API.</p>
<h3>Starting the Servers</h3>
<pre><code class="language-bash"># Browser server (starts automatically with AtlBrowser app)
xcrun simctl launch booted com.atl.browser
curl http://localhost:9222/ping  # ‚Üí {&quot;status&quot;:&quot;ok&quot;}

# Native server (run as UI Test)
cd ~/Atl/core/AtlBrowser
xcodebuild test -workspace AtlBrowser.xcworkspace \
  -scheme AtlBrowser \
  -destination &#39;id=&lt;SIMULATOR_UDID&gt;&#39; \
  -only-testing:AtlBrowserUITests/NativeServer/testNativeServer &amp;
  
# Wait for it to start, then:
curl http://localhost:9223/ping  # ‚Üí {&quot;status&quot;:&quot;ok&quot;,&quot;mode&quot;:&quot;native&quot;}
</code></pre>
<h3>Quick Port Reference</h3>
<table>
<thead>
<tr>
<th>Task</th>
<th>Port</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td>Browse websites</td>
<td>9222</td>
<td><code>curl localhost:9222/command -d &#39;{&quot;method&quot;:&quot;goto&quot;,...}&#39;</code></td>
</tr>
<tr>
<td>Open native app</td>
<td>9223</td>
<td><code>curl localhost:9223/command -d &#39;{&quot;method&quot;:&quot;openApp&quot;,...}&#39;</code></td>
</tr>
<tr>
<td>Screenshot (browser)</td>
<td>9222</td>
<td><code>curl localhost:9222/command -d &#39;{&quot;method&quot;:&quot;screenshot&quot;}&#39;</code></td>
</tr>
<tr>
<td>Screenshot (native)</td>
<td>9223</td>
<td><code>curl localhost:9223/command -d &#39;{&quot;method&quot;:&quot;screenshot&quot;}&#39;</code></td>
</tr>
</tbody></table>
<hr>
<h2>üì± Native App Automation (Port 9223)</h2>
<p>Native automation uses <strong>port 9223</strong> and automates <strong>any iOS app</strong> using the accessibility tree ‚Äî no DOM, no JavaScript, just direct element interaction.</p>
<h3>Opening &amp; Closing Apps</h3>
<pre><code class="language-bash"># Open an app by bundle ID
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;openApp&quot;,&quot;params&quot;:{&quot;bundleId&quot;:&quot;com.apple.Preferences&quot;}}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;bundleId&quot;:&quot;com.apple.Preferences&quot;,&quot;mode&quot;:&quot;native&quot;,&quot;state&quot;:&quot;running&quot;}}

# Check current app state
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;appState&quot;}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;mode&quot;:&quot;native&quot;,&quot;bundleId&quot;:&quot;com.apple.Preferences&quot;,&quot;state&quot;:&quot;running&quot;}}

# Close current app
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;closeApp&quot;}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;closed&quot;:true}}
</code></pre>
<h3>Common Bundle IDs</h3>
<table>
<thead>
<tr>
<th>App</th>
<th>Bundle ID</th>
</tr>
</thead>
<tbody><tr>
<td>Settings</td>
<td><code>com.apple.Preferences</code></td>
</tr>
<tr>
<td>Contacts</td>
<td><code>com.apple.MobileAddressBook</code></td>
</tr>
<tr>
<td>Calculator</td>
<td><code>com.apple.calculator</code></td>
</tr>
<tr>
<td>Calendar</td>
<td><code>com.apple.mobilecal</code></td>
</tr>
<tr>
<td>Photos</td>
<td><code>com.apple.mobileslideshow</code></td>
</tr>
<tr>
<td>Notes</td>
<td><code>com.apple.mobilenotes</code></td>
</tr>
<tr>
<td>Reminders</td>
<td><code>com.apple.reminders</code></td>
</tr>
<tr>
<td>Clock</td>
<td><code>com.apple.mobiletimer</code></td>
</tr>
<tr>
<td>Maps</td>
<td><code>com.apple.Maps</code></td>
</tr>
<tr>
<td>Safari</td>
<td><code>com.apple.mobilesafari</code></td>
</tr>
</tbody></table>
<h3>The <code>snapshot</code> Command</h3>
<p><code>snapshot</code> returns the accessibility tree ‚Äî all visible elements with their properties and tap-able references.</p>
<pre><code class="language-bash">curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;snapshot&quot;,&quot;params&quot;:{&quot;interactiveOnly&quot;:true}}&#39; | jq &#39;.result&#39;
</code></pre>
<p><strong>Example output:</strong></p>
<pre><code class="language-json">{
  &quot;count&quot;: 12,
  &quot;elements&quot;: [
    {
      &quot;ref&quot;: &quot;e0&quot;,
      &quot;type&quot;: &quot;cell&quot;,
      &quot;label&quot;: &quot;Wi-Fi&quot;,
      &quot;value&quot;: &quot;MyNetwork&quot;,
      &quot;identifier&quot;: &quot;&quot;,
      &quot;x&quot;: 0,
      &quot;y&quot;: 142,
      &quot;width&quot;: 393,
      &quot;height&quot;: 44,
      &quot;isHittable&quot;: true,
      &quot;isEnabled&quot;: true
    },
    {
      &quot;ref&quot;: &quot;e1&quot;,
      &quot;type&quot;: &quot;cell&quot;,
      &quot;label&quot;: &quot;Bluetooth&quot;,
      &quot;value&quot;: &quot;On&quot;,
      &quot;identifier&quot;: &quot;&quot;,
      &quot;x&quot;: 0,
      &quot;y&quot;: 186,
      &quot;width&quot;: 393,
      &quot;height&quot;: 44,
      &quot;isHittable&quot;: true,
      &quot;isEnabled&quot;: true
    },
    {
      &quot;ref&quot;: &quot;e2&quot;,
      &quot;type&quot;: &quot;button&quot;,
      &quot;label&quot;: &quot;Back&quot;,
      &quot;value&quot;: null,
      &quot;identifier&quot;: &quot;Back&quot;,
      &quot;x&quot;: 0,
      &quot;y&quot;: 44,
      &quot;width&quot;: 80,
      &quot;height&quot;: 44,
      &quot;isHittable&quot;: true,
      &quot;isEnabled&quot;: true
    }
  ]
}
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>interactiveOnly</code> (bool, default: <code>false</code>) ‚Äî Only return hittable elements</li>
<li><code>maxDepth</code> (int, optional) ‚Äî Limit tree traversal depth</li>
</ul>
<h3>The <code>tapRef</code> Command</h3>
<p>Tap an element by its reference from the last <code>snapshot</code>:</p>
<pre><code class="language-bash"># Take snapshot first
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;snapshot&quot;,&quot;params&quot;:{&quot;interactiveOnly&quot;:true}}&#39;

# Tap element e0 (Wi-Fi cell from example above)
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;tapRef&quot;,&quot;params&quot;:{&quot;ref&quot;:&quot;e0&quot;}}&#39;
# ‚Üí {&quot;success&quot;:true}
</code></pre>
<h3>The <code>find</code> Command</h3>
<p>Find and interact with elements by text ‚Äî no need to parse snapshot manually:</p>
<pre><code class="language-bash"># Find and tap &quot;Wi-Fi&quot;
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;find&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;Wi-Fi&quot;,&quot;action&quot;:&quot;tap&quot;}}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;found&quot;:true,&quot;ref&quot;:&quot;e0&quot;}}

# Check if an element exists
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;find&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;Bluetooth&quot;,&quot;action&quot;:&quot;exists&quot;}}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;found&quot;:true,&quot;ref&quot;:&quot;e1&quot;}}

# Find and fill a text field
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;find&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;First name&quot;,&quot;action&quot;:&quot;fill&quot;,&quot;value&quot;:&quot;John&quot;}}&#39;

# Get element info without interacting
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;find&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;Cancel&quot;,&quot;action&quot;:&quot;get&quot;}}&#39;
# ‚Üí {&quot;success&quot;:true,&quot;result&quot;:{&quot;found&quot;:true,&quot;ref&quot;:&quot;e5&quot;,&quot;element&quot;:{...}}}
</code></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>text</code> (string) ‚Äî Text to search for (matches label, value, or identifier)</li>
<li><code>action</code> (string) ‚Äî One of: <code>tap</code>, <code>fill</code>, <code>exists</code>, <code>get</code></li>
<li><code>value</code> (string, optional) ‚Äî Text to fill (required for <code>action:&quot;fill&quot;</code>)</li>
<li><code>by</code> (string, optional) ‚Äî Narrow search: <code>label</code>, <code>value</code>, <code>identifier</code>, <code>type</code>, or <code>any</code> (default)</li>
</ul>
<hr>
<h2>üîÑ Native App Workflow Example</h2>
<p>Here&#39;s a complete flow: open Settings, navigate to Wi-Fi, take a screenshot:</p>
<pre><code class="language-bash"># 1. Open Settings app
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;openApp&quot;,&quot;params&quot;:{&quot;bundleId&quot;:&quot;com.apple.Preferences&quot;}}&#39;

# 2. Wait for app to launch
sleep 1

# 3. Take snapshot to see available elements
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;snapshot&quot;,&quot;params&quot;:{&quot;interactiveOnly&quot;:true}}&#39; | jq &#39;.result.elements[:5]&#39;

# 4. Find and tap Wi-Fi
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;find&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;Wi-Fi&quot;,&quot;action&quot;:&quot;tap&quot;}}&#39;

# 5. Wait for navigation
sleep 0.5

# 6. Take screenshot of Wi-Fi settings
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;screenshot&quot;}&#39; | jq -r &#39;.result.data&#39; | base64 -d &gt; /tmp/wifi-settings.png

# 7. Navigate back (swipe right from left edge)
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;swipe&quot;,&quot;params&quot;:{&quot;direction&quot;:&quot;right&quot;}}&#39;

# 8. Close the app
curl -s -X POST http://localhost:9223/command \
  -d &#39;{&quot;method&quot;:&quot;closeApp&quot;}&#39;
</code></pre>
<h3>Helper Script Version</h3>
<pre><code class="language-bash">source ~/.openclaw/skills/atl-browser/scripts/atl-helper.sh

atl_openapp &quot;com.apple.Preferences&quot;
sleep 1
atl_find &quot;Wi-Fi&quot; tap
sleep 0.5
atl_screenshot /tmp/wifi-settings.png
atl_swipe right
atl_closeapp
</code></pre>
<hr>
<h2>üí° Core Insight: Vision-Free Automation</h2>
<p>ATL&#39;s killer feature is <strong>spatial understanding without vision models</strong>:</p>
<pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  markElements + captureForVision = COMPLETE PAGE KNOWLEDGE  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. markElements  ‚Üí Numbers every interactive element [1] [2] [3]
2. captureForVision ‚Üí PDF with text layer + element coordinates
3. tap x=234 y=567 ‚Üí Pixel-perfect touch at exact position
</code></pre>
<p><strong>Why this matters:</strong></p>
<ul>
<li><strong>No vision API calls</strong> ‚Äî zero token cost for &quot;seeing&quot; the page</li>
<li><strong>Faster</strong> ‚Äî no round-trip to GPT-4V/Claude Vision</li>
<li><strong>Deterministic</strong> ‚Äî same page = same coordinates, every time</li>
<li><strong>Reliable</strong> ‚Äî pixel-perfect coordinates vs. vision interpretation</li>
</ul>
<h3>The Vision-Free Workflow</h3>
<pre><code class="language-bash"># 1. Mark elements (adds numbered labels + stores coordinates)
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;markElements&quot;,&quot;params&quot;:{}}&#39;

# 2. Capture PDF with text layer (machine-readable, has coordinates)
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;captureForVision&quot;,&quot;params&quot;:{&quot;savePath&quot;:&quot;/tmp&quot;,&quot;name&quot;:&quot;page&quot;}}&#39; \
  | jq -r &#39;.result.path&#39;
# ‚Üí /tmp/page.pdf (text-selectable, contains element positions)

# 3. Get specific element&#39;s position by mark label
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;3&quot;,&quot;method&quot;:&quot;getMarkInfo&quot;,&quot;params&quot;:{&quot;label&quot;:5}}&#39; | jq &#39;.result&#39;
# ‚Üí {&quot;label&quot;:5, &quot;tag&quot;:&quot;button&quot;, &quot;text&quot;:&quot;Add to Cart&quot;, &quot;x&quot;:187, &quot;y&quot;:432, &quot;width&quot;:120, &quot;height&quot;:44}

# 4. Tap at exact coordinates
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;4&quot;,&quot;method&quot;:&quot;tap&quot;,&quot;params&quot;:{&quot;x&quot;:187,&quot;y&quot;:432}}&#39;
</code></pre>
<p><strong>The marks tell you WHERE everything is. The PDF tells you WHAT everything says. Together = full page understanding.</strong></p>
<h2>üéØ The Escalation Ladder</h2>
<p>When automation gets stuck, escalate through these levels:</p>
<pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Level 1: COORDINATES (fast, cheap, no API calls)          ‚îÇ
‚îÇ  markElements ‚Üí getMarkInfo ‚Üí tap x,y                      ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚Üì If stuck after 2-3 tries...                             ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Level 2: VISION FALLBACK (screenshot to understand state) ‚îÇ
‚îÇ  screenshot ‚Üí analyze UI ‚Üí identify blockers (modals, etc) ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚Üì If still stuck...                                       ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Level 3: JS INJECTION (direct DOM manipulation)           ‚îÇ
‚îÇ  evaluate ‚Üí dispatchEvent ‚Üí force interactions             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre>
<h3>When to Escalate</h3>
<table>
<thead>
<tr>
<th>Symptom</th>
<th>Likely Cause</th>
<th>Action</th>
</tr>
</thead>
<tbody><tr>
<td>Tap succeeds but nothing changes</td>
<td>Modal/overlay opened</td>
<td>Screenshot ‚Üí find new button</td>
</tr>
<tr>
<td>Cart count doesn&#39;t update</td>
<td>Site needs login or has bot detection</td>
<td>Try JS click with events</td>
</tr>
<tr>
<td>Element not found after scroll</td>
<td>Marks are page-relative, not viewport</td>
<td>Use <code>getBoundingClientRect</code> via evaluate</td>
</tr>
<tr>
<td>Same error 3+ times</td>
<td>UI state changed unexpectedly</td>
<td>Screenshot to see actual state</td>
</tr>
</tbody></table>
<h3>Real-World Pattern: E-commerce Checkout</h3>
<pre><code class="language-bash"># 1. Search and find product
atl_goto &quot;https://store.com/search?q=headphones&quot;
atl_mark

# 2. First, dismiss any modals/banners (ALWAYS DO THIS)
# Look for: close, dismiss, continue, accept, no thanks, got it
CLOSE=$(atl_find &quot;close&quot;)
[ -n &quot;$CLOSE&quot; ] &amp;&amp; atl_click $CLOSE

# 3. Find and click Add to Cart
ATC=$(atl_find &quot;Add to cart&quot;)
atl_click $ATC

# 4. Wait, then CHECK if it worked
sleep 2
atl_screenshot /tmp/after-click.png

# 5. If cart didn&#39;t update, LOOK at the screenshot
# Maybe a &quot;Choose options&quot; modal opened - find the NEW Add to Cart button
# This is the vision fallback - you need to SEE what happened
</code></pre>
<h3>Key Insight: Modals Change Everything</h3>
<p>When you click &quot;Add to cart&quot; on sites like Target, Amazon, etc., they often:</p>
<ol>
<li>Open a &quot;Choose options&quot; modal (size, color, quantity)</li>
<li>Show an upsell (protection plans, accessories)</li>
<li>Display a confirmation with &quot;View cart&quot; or &quot;Continue shopping&quot;</li>
</ol>
<p><strong>Your original tap WORKED</strong> ‚Äî you just can&#39;t see the result without a screenshot.</p>
<h2>üöÄ Quick Start (30 seconds)</h2>
<pre><code class="language-bash"># 1. Setup (boots sim, installs ATL)
~/.openclaw/skills/atl-browser/scripts/setup.sh

# 2. Navigate somewhere
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;goto&quot;,&quot;params&quot;:{&quot;url&quot;:&quot;https://example.com&quot;}}&#39;

# 3. Mark elements (shows [1], [2], [3] labels)
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;markElements&quot;,&quot;params&quot;:{}}&#39;

# 4. Take screenshot
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;3&quot;,&quot;method&quot;:&quot;screenshot&quot;,&quot;params&quot;:{}}&#39; | jq -r &#39;.result.data&#39; | base64 -d &gt; /tmp/page.png

# 5. Click element [1]
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;4&quot;,&quot;method&quot;:&quot;clickMark&quot;,&quot;params&quot;:{&quot;label&quot;:1}}&#39;
</code></pre>
<p><strong>Or use the helper functions:</strong></p>
<pre><code class="language-bash">source ~/.openclaw/skills/atl-browser/scripts/atl-helper.sh
atl_goto &quot;https://example.com&quot;
atl_mark
atl_screenshot /tmp/page.png
atl_click 1
</code></pre>
<h2>Quick Reference</h2>
<p><strong>Base URL:</strong> <code>http://localhost:9222</code></p>
<h3>Common Commands</h3>
<pre><code class="language-bash"># Check if ATL is running
curl -s http://localhost:9222/ping

# Navigate to URL
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;goto&quot;,&quot;params&quot;:{&quot;url&quot;:&quot;https://example.com&quot;}}&#39;

# Wait for page ready
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;waitForReady&quot;,&quot;params&quot;:{&quot;timeout&quot;:10}}&#39;

# Take screenshot (returns base64 PNG)
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;3&quot;,&quot;method&quot;:&quot;screenshot&quot;,&quot;params&quot;:{}}&#39; | jq -r &#39;.result.data&#39; | base64 -d &gt; screenshot.png

# Mark interactive elements (shows numbered labels)
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;4&quot;,&quot;method&quot;:&quot;markElements&quot;,&quot;params&quot;:{}}&#39;

# Click by mark label
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;5&quot;,&quot;method&quot;:&quot;clickMark&quot;,&quot;params&quot;:{&quot;label&quot;:3}}&#39;

# Scroll page
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;6&quot;,&quot;method&quot;:&quot;evaluate&quot;,&quot;params&quot;:{&quot;script&quot;:&quot;window.scrollBy(0, 500)&quot;}}&#39;

# Type text
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;7&quot;,&quot;method&quot;:&quot;type&quot;,&quot;params&quot;:{&quot;text&quot;:&quot;Hello world&quot;}}&#39;

# Click by CSS selector
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;8&quot;,&quot;method&quot;:&quot;click&quot;,&quot;params&quot;:{&quot;selector&quot;:&quot;button.submit&quot;}}&#39;
</code></pre>
<h2>Setup (First Time)</h2>
<h3>1. Start Simulator</h3>
<pre><code class="language-bash"># Boot iPhone 17 simulator (or another device)
xcrun simctl boot &quot;iPhone 17&quot;

# Open Simulator app
open -a Simulator
</code></pre>
<h3>2. Build &amp; Install AtlBrowser</h3>
<pre><code class="language-bash">cd ~/Atl/core/AtlBrowser

# Build for simulator (RECOMMENDED: target by UDID)
# Why: name-based destinations can cause Xcode to pick an older iOS runtime (15/16)
# and fail if AtlBrowser has an iOS 17+ deployment target.
#
# 1) Find a suitable simulator UDID (iOS 17+):
#   xcrun simctl list devices available
#
# 2) Build targeting that UDID:
xcodebuild -workspace AtlBrowser.xcworkspace \
  -scheme AtlBrowser \
  -destination &#39;id=&lt;SIM_UDID&gt;&#39; \
  -derivedDataPath /tmp/atl-dd \
  build

# Install to a specific simulator (preferred)
xcrun simctl install &lt;SIM_UDID&gt; \
  /tmp/atl-dd/Build/Products/Debug-iphonesimulator/AtlBrowser.app

# Launch the app
xcrun simctl launch &lt;SIM_UDID&gt; com.atl.browser
</code></pre>
<h3>3. Verify Server</h3>
<pre><code class="language-bash">curl -s http://localhost:9222/ping
# Should return: {&quot;status&quot;:&quot;ok&quot;}
</code></pre>
<h2>All Available Methods</h2>
<h3>App Control (Native Mode)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>openApp</code></td>
<td><code>{bundleId}</code></td>
<td>Any‚ÜíNative</td>
<td>Open app, switch to native mode</td>
</tr>
<tr>
<td><code>closeApp</code></td>
<td>-</td>
<td>Native</td>
<td>Close current app, return to browser mode</td>
</tr>
<tr>
<td><code>appState</code></td>
<td>-</td>
<td>Any</td>
<td>Get current mode and bundleId</td>
</tr>
<tr>
<td><code>openBrowser</code></td>
<td>-</td>
<td>Native‚ÜíBrowser</td>
<td>Switch back to browser mode</td>
</tr>
</tbody></table>
<h3>Native Accessibility</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>snapshot</code></td>
<td><code>{interactiveOnly?, maxDepth?}</code></td>
<td>Native</td>
<td>Get accessibility tree</td>
</tr>
<tr>
<td><code>tapRef</code></td>
<td><code>{ref}</code></td>
<td>Native</td>
<td>Tap element by ref (e.g., &quot;e0&quot;)</td>
</tr>
<tr>
<td><code>find</code></td>
<td><code>{text, action, value?, by?}</code></td>
<td>Native</td>
<td>Find element and interact</td>
</tr>
<tr>
<td><code>fillRef</code></td>
<td><code>{ref, text}</code></td>
<td>Native</td>
<td>Tap element and type text</td>
</tr>
<tr>
<td><code>focusRef</code></td>
<td><code>{ref}</code></td>
<td>Native</td>
<td>Focus element without typing</td>
</tr>
</tbody></table>
<h3>Navigation (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>goto</code></td>
<td><code>{url}</code></td>
<td>Browser</td>
<td>Navigate to URL</td>
</tr>
<tr>
<td><code>reload</code></td>
<td>-</td>
<td>Browser</td>
<td>Reload page</td>
</tr>
<tr>
<td><code>goBack</code></td>
<td>-</td>
<td>Browser</td>
<td>Go back</td>
</tr>
<tr>
<td><code>goForward</code></td>
<td>-</td>
<td>Browser</td>
<td>Go forward</td>
</tr>
<tr>
<td><code>getURL</code></td>
<td>-</td>
<td>Browser</td>
<td>Get current URL</td>
</tr>
<tr>
<td><code>getTitle</code></td>
<td>-</td>
<td>Browser</td>
<td>Get page title</td>
</tr>
</tbody></table>
<h3>Interactions (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>click</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Click element</td>
</tr>
<tr>
<td><code>doubleClick</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Double-click</td>
</tr>
<tr>
<td><code>type</code></td>
<td><code>{text}</code></td>
<td>Both</td>
<td>Type text</td>
</tr>
<tr>
<td><code>fill</code></td>
<td><code>{selector, value}</code></td>
<td>Browser</td>
<td>Fill input field</td>
</tr>
<tr>
<td><code>press</code></td>
<td><code>{key}</code></td>
<td>Both</td>
<td>Press key</td>
</tr>
<tr>
<td><code>hover</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Hover over element</td>
</tr>
<tr>
<td><code>scrollIntoView</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Scroll to element</td>
</tr>
</tbody></table>
<h3>Mark System (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>markElements</code></td>
<td>-</td>
<td>Browser</td>
<td>Mark visible interactive elements</td>
</tr>
<tr>
<td><code>markAll</code></td>
<td>-</td>
<td>Browser</td>
<td>Mark ALL interactive elements</td>
</tr>
<tr>
<td><code>unmarkElements</code></td>
<td>-</td>
<td>Browser</td>
<td>Remove marks</td>
</tr>
<tr>
<td><code>clickMark</code></td>
<td><code>{label}</code></td>
<td>Browser</td>
<td>Click by label number</td>
</tr>
<tr>
<td><code>getMarkInfo</code></td>
<td><code>{label}</code></td>
<td>Browser</td>
<td>Get element info by label</td>
</tr>
</tbody></table>
<h3>Screenshots &amp; Capture</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>screenshot</code></td>
<td><code>{fullPage?, selector?}</code></td>
<td>Both</td>
<td>Take screenshot</td>
</tr>
<tr>
<td><code>captureForVision</code></td>
<td><code>{savePath?, name?}</code></td>
<td>Browser</td>
<td>Full page PDF</td>
</tr>
<tr>
<td><code>captureJPEG</code></td>
<td><code>{quality?, fullPage?}</code></td>
<td>Both</td>
<td>JPEG capture</td>
</tr>
<tr>
<td><code>captureLight</code></td>
<td>-</td>
<td>Browser</td>
<td>Text + interactives only</td>
</tr>
</tbody></table>
<h3>Waiting (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>waitForSelector</code></td>
<td><code>{selector, timeout?}</code></td>
<td>Browser</td>
<td>Wait for element</td>
</tr>
<tr>
<td><code>waitForNavigation</code></td>
<td>-</td>
<td>Browser</td>
<td>Wait for navigation</td>
</tr>
<tr>
<td><code>waitForReady</code></td>
<td><code>{timeout?, stabilityMs?}</code></td>
<td>Browser</td>
<td>Wait for page ready</td>
</tr>
<tr>
<td><code>waitForAny</code></td>
<td><code>{selectors, timeout?}</code></td>
<td>Browser</td>
<td>Wait for any selector</td>
</tr>
</tbody></table>
<h3>JavaScript (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>evaluate</code></td>
<td><code>{script}</code></td>
<td>Browser</td>
<td>Run JavaScript</td>
</tr>
<tr>
<td><code>querySelector</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Find element</td>
</tr>
<tr>
<td><code>querySelectorAll</code></td>
<td><code>{selector}</code></td>
<td>Browser</td>
<td>Find all elements</td>
</tr>
<tr>
<td><code>getDOMSnapshot</code></td>
<td>-</td>
<td>Browser</td>
<td>Get page HTML</td>
</tr>
</tbody></table>
<h3>Cookies (Browser)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>getCookies</code></td>
<td>-</td>
<td>Browser</td>
<td>Get all cookies</td>
</tr>
<tr>
<td><code>setCookies</code></td>
<td><code>{cookies}</code></td>
<td>Browser</td>
<td>Set cookies</td>
</tr>
<tr>
<td><code>deleteCookies</code></td>
<td>-</td>
<td>Browser</td>
<td>Delete all cookies</td>
</tr>
</tbody></table>
<h3>Touch Gestures (Both Modes)</h3>
<table>
<thead>
<tr>
<th>Method</th>
<th>Params</th>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>tap</code></td>
<td><code>{x, y}</code></td>
<td>Both</td>
<td>Tap at coordinates</td>
</tr>
<tr>
<td><code>longPress</code></td>
<td><code>{x, y, duration?}</code></td>
<td>Both</td>
<td>Long press (default 0.5s)</td>
</tr>
<tr>
<td><code>swipe</code></td>
<td><code>{direction}</code></td>
<td>Both</td>
<td>Swipe up/down/left/right</td>
</tr>
<tr>
<td><code>swipe</code></td>
<td><code>{fromX, fromY, toX, toY}</code></td>
<td>Both</td>
<td>Swipe between points</td>
</tr>
<tr>
<td><code>pinch</code></td>
<td><code>{scale, duration?}</code></td>
<td>Both</td>
<td>Pinch zoom (scale &gt; 1 = zoom in)</td>
</tr>
</tbody></table>
<h4>Swipe Examples</h4>
<pre><code class="language-bash"># Swipe up (scroll down)
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;swipe&quot;,&quot;params&quot;:{&quot;direction&quot;:&quot;up&quot;}}&#39;

# Swipe left (next page in carousel)
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;swipe&quot;,&quot;params&quot;:{&quot;direction&quot;:&quot;left&quot;,&quot;distance&quot;:400}}&#39;

# Custom swipe path
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;3&quot;,&quot;method&quot;:&quot;swipe&quot;,&quot;params&quot;:{&quot;fromX&quot;:200,&quot;fromY&quot;:600,&quot;toX&quot;:200,&quot;toY&quot;:200}}&#39;

# Long press for context menu
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;4&quot;,&quot;method&quot;:&quot;longPress&quot;,&quot;params&quot;:{&quot;x&quot;:150,&quot;y&quot;:300,&quot;duration&quot;:1.0}}&#39;

# Pinch to zoom in
curl -s -X POST http://localhost:9222/command \
  -d &#39;{&quot;id&quot;:&quot;5&quot;,&quot;method&quot;:&quot;pinch&quot;,&quot;params&quot;:{&quot;scale&quot;:2.0}}&#39;
</code></pre>
<h2>Typical Workflow</h2>
<pre><code class="language-bash"># 1. Navigate to site
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;goto&quot;,&quot;params&quot;:{&quot;url&quot;:&quot;https://www.apple.com/shop&quot;}}&#39;

# 2. Wait for page to load
sleep 2
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;waitForReady&quot;,&quot;params&quot;:{&quot;timeout&quot;:10}}&#39;

# 3. Mark elements to see what&#39;s clickable
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;3&quot;,&quot;method&quot;:&quot;markElements&quot;,&quot;params&quot;:{}}&#39;

# 4. Take screenshot to see the marks
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;4&quot;,&quot;method&quot;:&quot;screenshot&quot;,&quot;params&quot;:{}}&#39; | jq -r &#39;.result.data&#39; | base64 -d &gt; /tmp/page.png

# 5. Click a marked element (e.g., label 14)
curl -s -X POST http://localhost:9222/command \
  -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;5&quot;,&quot;method&quot;:&quot;clickMark&quot;,&quot;params&quot;:{&quot;label&quot;:14}}&#39;

# 6. Repeat as needed
</code></pre>
<h2>Troubleshooting</h2>
<h3>Navigation not working (goto returns success but page doesn&#39;t change)</h3>
<p>Known issue: <code>goto</code> command may return success without navigating. Use JS workaround:</p>
<pre><code class="language-bash"># Instead of goto, use evaluate to navigate
curl -s -X POST http://localhost:9222/command -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;evaluate&quot;,&quot;params&quot;:{&quot;script&quot;:&quot;location.href = \&quot;https://example.com\&quot;; true&quot;}}&#39;

# Wait for page load
sleep 3
curl -s -X POST http://localhost:9222/command -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;waitForReady&quot;,&quot;params&quot;:{&quot;timeout&quot;:10}}&#39;
</code></pre>
<h3>Server not responding</h3>
<pre><code class="language-bash"># Check if app is running
xcrun simctl listapps booted | grep atl

# Restart the app
xcrun simctl terminate booted com.atl.browser
xcrun simctl launch booted com.atl.browser

# Check logs
xcrun simctl spawn booted log show --predicate &#39;process == &quot;AtlBrowser&quot;&#39; --last 1m
</code></pre>
<h3>Need to rebuild (iOS version changes)</h3>
<pre><code class="language-bash">cd ~/Atl/core/AtlBrowser
xcodebuild -workspace AtlBrowser.xcworkspace -scheme AtlBrowser -sdk iphonesimulator build
xcrun simctl install booted ~/Library/Developer/Xcode/DerivedData/AtlBrowser-*/Build/Products/Debug-iphonesimulator/AtlBrowser.app
xcrun simctl launch booted com.atl.browser
</code></pre>
<h3>Port 9222 in use</h3>
<p>The ATL server runs inside the simulator app. If port 9222 is blocked, check for other processes:</p>
<pre><code class="language-bash">lsof -i :9222
</code></pre>
<h2>Best Practices</h2>
<h3>1. Clean UI Before Acting</h3>
<p>Real users dismiss popups. You should too.</p>
<pre><code class="language-bash"># Before any workflow, check for and dismiss:
# - Cookie consent banners
# - Newsletter popups  
# - Health/privacy consent modals
# - &quot;Download our app&quot; prompts
atl_mark
for KEYWORD in &quot;close&quot; &quot;dismiss&quot; &quot;no thanks&quot; &quot;accept&quot; &quot;got it&quot; &quot;continue&quot;; do
  LABEL=$(atl_find &quot;$KEYWORD&quot;)
  [ -n &quot;$LABEL&quot; ] &amp;&amp; atl_click $LABEL &amp;&amp; sleep 1
done
</code></pre>
<h3>2. Verify State After Actions</h3>
<p>Don&#39;t assume ‚Äî confirm.</p>
<pre><code class="language-bash">atl_click $ADD_TO_CART
sleep 2
# Check if cart updated
CART=$(atl_find &quot;cart [1-9]&quot;)
if [ -z &quot;$CART&quot; ]; then
  # Didn&#39;t work - take screenshot to see why
  atl_screenshot /tmp/debug.png
  echo &quot;Action may have opened a modal - check screenshot&quot;
fi
</code></pre>
<h3>3. Use Viewport Coordinates for Taps</h3>
<p>Marks give page-relative coordinates. For tap to work, the element must be visible.</p>
<pre><code class="language-bash"># Option A: Scroll element into view first
curl -s -X POST http://localhost:9222/command -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;1&quot;,&quot;method&quot;:&quot;evaluate&quot;,&quot;params&quot;:{&quot;script&quot;:&quot;document.querySelector(\&quot;#my-button\&quot;).scrollIntoView()&quot;}}&#39;

# Option B: Get viewport-relative coords via JS
curl -s -X POST http://localhost:9222/command -H &quot;Content-Type: application/json&quot; \
  -d &#39;{&quot;id&quot;:&quot;2&quot;,&quot;method&quot;:&quot;evaluate&quot;,&quot;params&quot;:{&quot;script&quot;:&quot;var r = document.querySelector(\&quot;#my-button\&quot;).getBoundingClientRect(); JSON.stringify({x: r.x + r.width/2, y: r.y + r.height/2})&quot;}}&#39;
</code></pre>
<h3>4. Screenshot is Your Debugging Superpower</h3>
<p>When in doubt, look.</p>
<pre><code class="language-bash">atl_screenshot /tmp/current-state.png
# Then analyze with vision or just open the file
</code></pre>
<h2>Notes</h2>
<ul>
<li>ATL runs inside the iOS Simulator, sharing the host&#39;s network</li>
<li>Port 9222 is the default (matches Chrome DevTools Protocol convention)</li>
<li>The mark system shows red numbered labels on interactive elements</li>
<li>Screenshots are PNG base64-encoded; use <code>base64 -d</code> to decode</li>
<li>iOS 26+ compatible (fixed NWListener binding issue)</li>
</ul>
<h2>Requirements</h2>
<ul>
<li><strong>macOS</strong> with Xcode installed</li>
<li><strong>iOS Simulator</strong> (comes with Xcode)</li>
<li>That&#39;s it!</li>
</ul>
<h2>Examples</h2>
<p>See <code>examples/</code> folder:</p>
<ul>
<li><code>test-browse.sh</code> - Quick bash test workflow</li>
</ul>
<h2>API Reference</h2>
<p>For machine-readable API spec, see <a href="../api/openapi.yaml">openapi.yaml</a> ‚Äî includes all commands, parameters, and response schemas.</p>
<h2>Source</h2>
<ul>
<li>GitHub: <a href="https://github.com/JordanCoin/Atl">https://github.com/JordanCoin/Atl</a></li>
<li>Author: <a href="https://github.com/JordanCoin">@JordanCoin</a></li>
</ul>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/jordancoin/atl-mobile/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/jordancoin/atl-mobile" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/jordancoin/atl-mobile/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@jordancoin</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Browser & Automation</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }
  </script>
</body>
</html>