<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Safe command execution for OpenClaw Agents with automatic danger pattern detection, risk assessment, user approval">
  <title>safe-exec - MoltDirectory</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="../../index.html" class="logo">

        <span class="logo-text">MoltDirectory</span>
      </a>
      <nav class="header-links">
        <a href="../../start-here/index.html" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="../index.html" class="back-link">‚Üê Back to Browser & Automation</a>
              <div class="skill-page-meta">
                <a href="../index.html" class="skill-page-category">Browser & Automation</a>
                <span class="skill-page-author">by @ottttto</span>
              </div>
              <h1 class="skill-page-title">safe-exec</h1>
              <p class="skill-page-desc">Safe command execution for OpenClaw Agents with automatic danger pattern detection, risk assessment, user approval</p>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>SafeExec - Safe Command Execution</h1>
<p>Provides secure command execution capabilities for OpenClaw Agents with automatic interception of dangerous operations and approval workflow.</p>
<h2>Features</h2>
<ul>
<li>üîç <strong>Automatic danger pattern detection</strong> - Identifies risky commands before execution</li>
<li>üö® <strong>Risk-based interception</strong> - Multi-level assessment (CRITICAL/HIGH/MEDIUM/LOW)</li>
<li>üí¨ <strong>In-session notifications</strong> - Real-time alerts in your current terminal/session</li>
<li>‚úÖ <strong>User approval workflow</strong> - Commands wait for explicit confirmation</li>
<li>üìä <strong>Complete audit logging</strong> - Full traceability of all operations</li>
<li>ü§ñ <strong>Agent-friendly</strong> - Non-interactive mode support for automated workflows</li>
<li>üîß <strong>Platform-agnostic</strong> - Works independently of communication tools (Feishu, Telegram, etc.)</li>
</ul>
<h2>Quick Start</h2>
<h3>Installation (One Command)</h3>
<p><strong>The easiest way to install SafeExec:</strong></p>
<p>Just say in your OpenClaw chat:</p>
<pre><code>Help me install SafeExec skill from ClawdHub
</code></pre>
<p>OpenClaw will automatically download, install, and configure SafeExec for you!</p>
<h3>Alternative: Manual Installation</h3>
<p>If you prefer manual installation:</p>
<pre><code class="language-bash"># Using ClawdHub CLI
export CLAWDHUB_REGISTRY=https://www.clawhub.ai
clawdhub install safe-exec

# Or download directly from GitHub
git clone https://github.com/OTTTTTO/safe-exec.git ~/.openclaw/skills/safe-exec
chmod +x ~/.openclaw/skills/safe-exec/safe-exec*.sh
</code></pre>
<h3>Enable SafeExec</h3>
<p>After installation, simply say:</p>
<pre><code>Enable SafeExec
</code></pre>
<p>SafeExec will start monitoring all shell commands automatically!</p>
<h2>How It Works</h2>
<p>Once enabled, SafeExec automatically monitors all shell command executions. When a potentially dangerous command is detected, it intercepts the execution and requests your approval through <strong>in-session terminal notifications</strong>.</p>
<p><strong>Architecture:</strong></p>
<ul>
<li>Requests stored in: <code>~/.openclaw/safe-exec/pending/</code></li>
<li>Audit log: <code>~/.openclaw/safe-exec-audit.log</code></li>
<li>Rules config: <code>~/.openclaw/safe-exec-rules.json</code></li>
</ul>
<h2>Usage</h2>
<p><strong>Enable SafeExec:</strong></p>
<pre><code>Enable SafeExec
</code></pre>
<pre><code>Turn on SafeExec
</code></pre>
<pre><code>Start SafeExec
</code></pre>
<p>Once enabled, SafeExec runs transparently in the background. Agents can execute commands normally, and SafeExec will automatically intercept dangerous operations:</p>
<pre><code>Delete all files in /tmp/test
</code></pre>
<pre><code>Format the USB drive
</code></pre>
<p>SafeExec detects the risk level and displays an in-session prompt for approval.</p>
<h2>Risk Levels</h2>
<p><strong>CRITICAL</strong>: System-destructive commands (rm -rf /, dd, mkfs, etc.)
<strong>HIGH</strong>: User data deletion or significant system changes
<strong>MEDIUM</strong>: Service operations or configuration changes
<strong>LOW</strong>: Read operations and safe file manipulations</p>
<h2>Approval Workflow</h2>
<ol>
<li>Agent executes a command</li>
<li>SafeExec analyzes the risk level</li>
<li><strong>In-session notification displayed</strong> in your terminal</li>
<li>Approve or reject via:<ul>
<li>Terminal: <code>safe-exec-approve &lt;request_id&gt;</code></li>
<li>List pending: <code>safe-exec-list</code></li>
<li>Reject: <code>safe-exec-reject &lt;request_id&gt;</code></li>
</ul>
</li>
<li>Command executes or is cancelled</li>
</ol>
<p><strong>Example notification:</strong></p>
<pre><code>üö® **Dangerous Operation Detected - Command Intercepted**

**Risk Level:** CRITICAL
**Command:** `rm -rf /tmp/test`
**Reason:** Recursive deletion with force flag

**Request ID:** `req_1769938492_9730`

‚ÑπÔ∏è  This command requires user approval to execute.

**Approval Methods:**
1. In terminal: `safe-exec-approve req_1769938492_9730`
2. Or: `safe-exec-list` to view all pending requests

**Rejection Method:**
 `safe-exec-reject req_1769938492_9730`
</code></pre>
<h2>Configuration</h2>
<p>Environment variables for customization:</p>
<ul>
<li><code>SAFE_EXEC_DISABLE</code> - Set to &#39;1&#39; to globally disable safe-exec</li>
<li><code>OPENCLAW_AGENT_CALL</code> - Automatically enabled in agent mode (non-interactive)</li>
<li><code>SAFE_EXEC_AUTO_CONFIRM</code> - Auto-approve LOW/MEDIUM risk commands</li>
</ul>
<h2>Examples</h2>
<p><strong>Enable SafeExec:</strong></p>
<pre><code>Enable SafeExec
</code></pre>
<p><strong>After enabling, agents work normally:</strong></p>
<pre><code>Delete old log files from /var/log
</code></pre>
<p>SafeExec automatically detects this is HIGH risk (deletion) and displays an in-session approval prompt.</p>
<p><strong>Safe operations pass through without interruption:</strong></p>
<pre><code>List files in /home/user/documents
</code></pre>
<p>This is LOW risk and executes without approval.</p>
<h2>Global Control</h2>
<p><strong>Check status:</strong></p>
<pre><code>safe-exec-list
</code></pre>
<p><strong>View audit log:</strong></p>
<pre><code class="language-bash">cat ~/.openclaw/safe-exec-audit.log
</code></pre>
<p><strong>Disable SafeExec globally:</strong></p>
<pre><code>Disable SafeExec
</code></pre>
<p>Or set environment variable:</p>
<pre><code class="language-bash">export SAFE_EXEC_DISABLE=1
</code></pre>
<h2>Reporting Issues</h2>
<p><strong>Found a bug? Have a feature request?</strong></p>
<p>Please report issues at:
üîó <strong><a href="https://github.com/OTTTTTO/safe-exec/issues">https://github.com/OTTTTTO/safe-exec/issues</a></strong></p>
<p>We welcome community feedback, bug reports, and feature suggestions!</p>
<p>When reporting issues, please include:</p>
<ul>
<li>SafeExec version (run: <code>grep &quot;VERSION&quot; ~/.openclaw/skills/safe-exec/safe-exec.sh</code>)</li>
<li>OpenClaw version</li>
<li>Steps to reproduce</li>
<li>Expected vs actual behavior</li>
<li>Relevant logs from <code>~/.openclaw/safe-exec-audit.log</code></li>
</ul>
<h2>Audit Log</h2>
<p>All command executions are logged with:</p>
<ul>
<li>Timestamp</li>
<li>Command executed</li>
<li>Risk level</li>
<li>Approval status</li>
<li>Execution result</li>
<li>Request ID for traceability</li>
</ul>
<p>Log location: <code>~/.openclaw/safe-exec-audit.log</code></p>
<h2>Integration</h2>
<p>SafeExec integrates seamlessly with OpenClaw agents. Once enabled, it works transparently without requiring changes to agent behavior or command structure. The approval workflow is entirely local and independent of any external communication platform.</p>
<h2>Platform Independence</h2>
<p>SafeExec operates at the <strong>session level</strong>, working with any communication channel your OpenClaw instance supports (webchat, Feishu, Telegram, Discord, etc.). The approval workflow happens through your terminal, ensuring you maintain control regardless of how you&#39;re interacting with your agent.</p>
<h2>Support &amp; Community</h2>
<ul>
<li><strong>GitHub Repository:</strong> <a href="https://github.com/OTTTTTO/safe-exec">https://github.com/OTTTTTO/safe-exec</a></li>
<li><strong>Issue Tracker:</strong> <a href="https://github.com/OTTTTTO/safe-exec/issues">https://github.com/OTTTTTO/safe-exec/issues</a></li>
<li><strong>Documentation:</strong> <a href="https://github.com/OTTTTTO/safe-exec/blob/master/README.md">README.md</a></li>
<li><strong>ClawdHub:</strong> <a href="https://www.clawhub.ai/skills/safe-exec">https://www.clawhub.ai/skills/safe-exec</a></li>
</ul>
<h2>License</h2>
<p>MIT License - See <a href="https://github.com/OTTTTTO/safe-exec/blob/master/LICENSE">LICENSE</a> for details.</p>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/ottttto/safe-exec/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/ottttto/safe-exec" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/ottttto/safe-exec/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@ottttto</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Browser & Automation</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">MoltDirectory.com is a community-run project and is not affiliated with the official MoltBot team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }
  </script>
</body>
</html>