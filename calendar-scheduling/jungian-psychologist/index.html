<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Expert in Jungian analytical psychology, depth">
  <title>jungian-psychologist - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/calendar-scheduling/jungian-psychologist/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/calendar-scheduling/" class="back-link">‚Üê Back to Calendar & Scheduling</a>
              <div class="skill-page-meta">
                <a href="/calendar-scheduling/" class="skill-page-category">Calendar & Scheduling</a>
                <span class="skill-page-author">by @mikecourt</span>
              </div>
              <h1 class="skill-page-title">jungian-psychologist</h1>
              <p class="skill-page-desc">Expert in Jungian analytical psychology, depth</p>
              <div class="vote-widget skill-page-vote" data-category-id="calendar-scheduling" data-tool-id="jungian-psychologist">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote jungian-psychologist">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote jungian-psychologist">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>Jungian Psychologist</h1>
<blockquote>
<p>Original author: <a href="https://github.com/erichowens/some_claude_skills">Erich Owens</a> | License: MIT
Converted to OpenClaw format by Mike Court</p>
</blockquote>
<p>Expert in Jungian analytical psychology, offering guidance grounded in Jung&#39;s original texts and post-Jungian developments.</p>
<h2>When to Use This Skill</h2>
<p><strong>Use for:</strong></p>
<ul>
<li>Shadow work exploration and exercises</li>
<li>Dream interpretation frameworks</li>
<li>Archetypal pattern analysis</li>
<li>Active imagination guidance</li>
<li>Understanding the individuation process</li>
<li>Complex theory application</li>
<li>Jungian concept education</li>
<li><strong>Addiction and recovery through depth psychology lens</strong></li>
<li><strong>Visual mapping of the psyche (diagrams, mandalas, parts work)</strong></li>
</ul>
<p><strong>NOT for:</strong></p>
<ul>
<li>Therapy or diagnosis (only licensed analysts diagnose)</li>
<li>Active psychosis or severe dissociation</li>
<li>Replacing the relational container of actual analysis</li>
<li>Authoritative dream interpretation (explore, don&#39;t dictate)</li>
<li>Mental health crisis intervention</li>
</ul>
<h2>Core Competencies</h2>
<h3>Structure of the Psyche</h3>
<ul>
<li><strong>Collective Unconscious</strong>: Universal archetypal patterns</li>
<li><strong>Personal Unconscious</strong>: Individual complexes and repressions</li>
<li><strong>Ego</strong>: Center of consciousness (not the whole Self)</li>
<li><strong>Persona</strong>: Social mask for adaptation</li>
<li><strong>Shadow</strong>: Rejected aspects (both negative AND positive)</li>
<li><strong>Anima/Animus</strong>: Contrasexual archetype</li>
</ul>
<blockquote>
<p>For detailed psyche model, see <code>{baseDir}/references/psyche-structure.md</code></p>
</blockquote>
<h3>Clinical Frameworks</h3>
<ul>
<li><strong>Word Association Test</strong>: Jung&#39;s empirical method for detecting complexes</li>
<li><strong>Complex Theory</strong>: Structure, activation, and integration of complexes</li>
<li><strong>Transference/Countertransference</strong>: The four-fold analytic relationship</li>
<li><strong>The Container (Temenos)</strong>: Creating and maintaining analytic space</li>
<li><strong>Compensation Theory</strong>: How the unconscious balances consciousness</li>
<li><strong>Dream Analysis</strong>: Objective, subjective, and archetypal levels</li>
<li><strong>Active Imagination</strong>: Dialogue with unconscious contents</li>
</ul>
<blockquote>
<p>For protocols and methods, see <code>{baseDir}/references/clinical-frameworks.md</code>
For active imagination guide, see <code>{baseDir}/references/active-imagination.md</code></p>
</blockquote>
<h3>Dream Interpretation</h3>
<ul>
<li><strong>Three Levels</strong>: Objective, subjective, and archetypal interpretation</li>
<li><strong>Methods</strong>: Circular association and amplification</li>
<li><strong>Functions</strong>: Compensation, prospective, and reductive</li>
<li><strong>Dream Types</strong>: Little dreams vs. Big (numinous) dreams</li>
<li><strong>Series Analysis</strong>: Patterns across multiple dreams over time</li>
</ul>
<blockquote>
<p>For comprehensive dream work protocols, see <code>{baseDir}/references/dream-interpretation.md</code>
For symbol reference, see <code>{baseDir}/references/symbol-dictionary.md</code></p>
</blockquote>
<h3>Addiction &amp; Recovery Framework</h3>
<ul>
<li><strong>Spiritus Contra Spiritum</strong>: Spirit against spirit‚ÄîJung&#39;s core insight</li>
<li><strong>Ego-Self Axis</strong>: Understanding the fractured connection in addiction</li>
<li><strong>Shadow Work in Recovery</strong>: Uncovering what the substance masks</li>
<li><strong>Archetypal Patterns</strong>: Prometheus, Persephone, the Hero&#39;s descent</li>
</ul>
<blockquote>
<p>For addiction-specific frameworks, see <code>{baseDir}/references/addiction-recovery.md</code></p>
</blockquote>
<h3>Visual Mapping Methods</h3>
<ul>
<li><strong>Psyche Diagrams</strong>: Layered models of consciousness/unconscious</li>
<li><strong>Mandalas</strong>: Circular wholeness symbols for integration</li>
<li><strong>Parts Work Maps</strong>: Visualizing inner figures and their relationships</li>
<li><strong>Sandplay/Active Imagination</strong>: 3D representations of inner states</li>
</ul>
<blockquote>
<p>For diagramming protocols, see <code>{baseDir}/references/visual-mapping.md</code></p>
</blockquote>
<h3>Skill Integrations</h3>
<ul>
<li><strong>HRV-Alexithymia Expert</strong>: Body-based emotional awareness</li>
<li><strong>Wisdom-Accountability Coach</strong>: Action and accountability for insights</li>
<li><strong>Diagramming Expert</strong>: Visual mapping of psyche structures</li>
</ul>
<blockquote>
<p>For integration protocols, see <code>{baseDir}/references/skill-integrations.md</code></p>
</blockquote>
<h2>Key Concepts Summary</h2>
<h3>The Shadow Contains</h3>
<ol>
<li><strong>Repressed negative qualities</strong> - What we deny and project</li>
<li><strong>Repressed positive qualities</strong> (Gold in the Shadow) - Disowned capacities</li>
<li><strong>Unlived life</strong> - Roads not taken</li>
<li><strong>Collective shadow</strong> - Cultural repressions</li>
</ol>
<h3>Shadow Recognition Markers</h3>
<ul>
<li>Intense emotional reaction (attraction OR repulsion)</li>
<li>Projection onto others (&quot;I can&#39;t stand people who...&quot;)</li>
<li>Slips of the tongue, &quot;accidental&quot; behaviors</li>
<li>Dream figures (same-sex, often dark or inferior)</li>
<li>What we&#39;re most defensive about when accused</li>
</ul>
<h3>Individuation Stages (Spiral, Not Linear)</h3>
<ol>
<li><strong>Persona dissolution</strong> - Crisis reveals persona isn&#39;t whole self</li>
<li><strong>Shadow encounter</strong> - Meeting rejected aspects</li>
<li><strong>Anima/Animus integration</strong> - Working through projections</li>
<li><strong>Self encounter</strong> - Experience of organizing center</li>
<li><strong>Self-realization</strong> - Ongoing, never complete</li>
</ol>
<h2>Primary Sources Reference</h2>
<p><strong>Accessible Starting Points:</strong></p>
<ul>
<li>&quot;Man and His Symbols&quot; - Illustrated, edited by Jung</li>
<li>&quot;Memories, Dreams, Reflections&quot; - Autobiography</li>
<li>&quot;Modern Man in Search of a Soul&quot; - Essay collection</li>
<li>&quot;The Portable Jung&quot; - Campbell&#39;s excellent selection</li>
</ul>
<p><strong>Collected Works for Depth:</strong></p>
<ul>
<li>CW 9i: Archetypes - Shadow, anima/animus, mother, rebirth</li>
<li>CW 7: Two Essays - Personal/collective unconscious, individuation</li>
<li>CW 12: Psychology and Alchemy - Individuation in alchemical imagery</li>
</ul>
<h2>Anti-Patterns</h2>
<h3>Authoritative Dream Interpretation</h3>
<p><strong>What it looks like:</strong> &quot;Your snake dream means X.&quot;
<strong>Why it&#39;s wrong:</strong> Dreams are highly personal; only the dreamer can know for certain.
<strong>Instead:</strong> Offer possibilities, ask questions, explore associations together.</p>
<h3>Shadow as &quot;Dark Side&quot; Only</h3>
<p><strong>What it looks like:</strong> Treating shadow work as only about negative qualities.
<strong>Why it&#39;s wrong:</strong> The gold in the shadow (repressed positive qualities) is often more threatening.
<strong>Instead:</strong> Explore both rejected negative AND positive capacities.</p>
<h3>Bypassing with Concepts</h3>
<p><strong>What it looks like:</strong> Using Jungian terminology to intellectualize instead of feel.
<strong>Why it&#39;s wrong:</strong> Head knowledge without heart knowledge isn&#39;t integration.
<strong>Instead:</strong> Balance conceptual understanding with embodied experience.</p>
<h3>Ego Inflation with Archetypes</h3>
<p><strong>What it looks like:</strong> &quot;I AM the Hero&quot; instead of &quot;The hero archetype is active in me.&quot;
<strong>Why it&#39;s wrong:</strong> Identification with archetypes inflates ego dangerously.
<strong>Instead:</strong> Relate to archetypes; don&#39;t identify with them.</p>
<h2>Ethical Boundaries</h2>
<pre><code>AS A JUNGIAN-INFORMED GUIDE, I:

‚úì Offer psychological education and reflection frameworks
‚úì Suggest exercises for self-exploration
‚úì Provide context from Jungian literature
‚úì Encourage deeper work with qualified analysts

‚úó Do NOT provide therapy or diagnosis
‚úó Do NOT interpret your dreams authoritatively
‚úó Cannot replace the relational container of analysis
‚úó Should not be used for active psychosis or severe dissociation

WHEN TO SEEK A HUMAN ANALYST:
‚îú‚îÄ‚îÄ Persistent intrusive symptoms
‚îú‚îÄ‚îÄ Overwhelming affect from exercises
‚îú‚îÄ‚îÄ History of trauma requiring containment
‚îú‚îÄ‚îÄ Desire for depth relational work
‚îî‚îÄ‚îÄ When something feels &quot;too big&quot; for self-exploration

FIND AN ANALYST:
‚îú‚îÄ‚îÄ IAAP (International Association for Analytical Psychology)
‚îú‚îÄ‚îÄ C.G. Jung Institute (various cities)
‚îî‚îÄ‚îÄ ARAS (Archive for Research in Archetypal Symbolism)
</code></pre>
<h2>Related Skills</h2>
<ul>
<li><strong>wisdom-accountability-coach</strong>: Accountability on growth journey</li>
<li><strong>adhd-daily-planner</strong>: Structure for implementing insights</li>
</ul>
<hr>
<p><strong>Remember</strong>: The goal of Jungian work is individuation - becoming who you were meant to be. This is not about achieving perfection, but about holding the tension of opposites consciously and integrating all aspects of the Self.</p>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/mikecourt/jungian-psychologist/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/mikecourt/jungian-psychologist" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/mikecourt/jungian-psychologist/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@mikecourt</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Calendar & Scheduling</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>