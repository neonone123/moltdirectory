<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Guide for creating high-quality MCP (Model Context Protocol) servers">
  <title>mcp-builder - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/coding-agents-ides/mcp-builder/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/coding-agents-ides/" class="back-link">‚Üê Back to Coding Agents & IDEs</a>
              <div class="skill-page-meta">
                <a href="/coding-agents-ides/" class="skill-page-category">Coding Agents & IDEs</a>
                <span class="skill-page-author">by @seanphan</span>
              </div>
              <h1 class="skill-page-title">mcp-builder</h1>
              <p class="skill-page-desc">Guide for creating high-quality MCP (Model Context Protocol) servers</p>
              <div class="vote-widget skill-page-vote" data-category-id="coding-agents-ides" data-tool-id="mcp-builder">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote mcp-builder">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote mcp-builder">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>MCP Server Development Guide</h1>
<h2>Overview</h2>
<p>To create high-quality MCP (Model Context Protocol) servers that enable LLMs to effectively interact with external services, use this skill. An MCP server provides tools that allow LLMs to access external services and APIs. The quality of an MCP server is measured by how well it enables LLMs to accomplish real-world tasks using the tools provided.</p>
<hr>
<h1>Process</h1>
<h2>üöÄ High-Level Workflow</h2>
<p>Creating a high-quality MCP server involves four main phases:</p>
<h3>Phase 1: Deep Research and Planning</h3>
<h4>1.1 Understand Agent-Centric Design Principles</h4>
<p>Before diving into implementation, understand how to design tools for AI agents by reviewing these principles:</p>
<p><strong>Build for Workflows, Not Just API Endpoints:</strong></p>
<ul>
<li>Don&#39;t simply wrap existing API endpoints - build thoughtful, high-impact workflow tools</li>
<li>Consolidate related operations (e.g., <code>schedule_event</code> that both checks availability and creates event)</li>
<li>Focus on tools that enable complete tasks, not just individual API calls</li>
<li>Consider what workflows agents actually need to accomplish</li>
</ul>
<p><strong>Optimize for Limited Context:</strong></p>
<ul>
<li>Agents have constrained context windows - make every token count</li>
<li>Return high-signal information, not exhaustive data dumps</li>
<li>Provide &quot;concise&quot; vs &quot;detailed&quot; response format options</li>
<li>Default to human-readable identifiers over technical codes (names over IDs)</li>
<li>Consider the agent&#39;s context budget as a scarce resource</li>
</ul>
<p><strong>Design Actionable Error Messages:</strong></p>
<ul>
<li>Error messages should guide agents toward correct usage patterns</li>
<li>Suggest specific next steps: &quot;Try using filter=&#39;active_only&#39; to reduce results&quot;</li>
<li>Make errors educational, not just diagnostic</li>
<li>Help agents learn proper tool usage through clear feedback</li>
</ul>
<p><strong>Follow Natural Task Subdivisions:</strong></p>
<ul>
<li>Tool names should reflect how humans think about tasks</li>
<li>Group related tools with consistent prefixes for discoverability</li>
<li>Design tools around natural workflows, not just API structure</li>
</ul>
<p><strong>Use Evaluation-Driven Development:</strong></p>
<ul>
<li>Create realistic evaluation scenarios early</li>
<li>Let agent feedback drive tool improvements</li>
<li>Prototype quickly and iterate based on actual agent performance</li>
</ul>
<h4>1.3 Study MCP Protocol Documentation</h4>
<p><strong>Fetch the latest MCP protocol documentation:</strong></p>
<p>Use WebFetch to load: <code>https://modelcontextprotocol.io/llms-full.txt</code></p>
<p>This comprehensive document contains the complete MCP specification and guidelines.</p>
<h4>1.4 Study Framework Documentation</h4>
<p><strong>Load and read the following reference files:</strong></p>
<ul>
<li><strong>MCP Best Practices</strong>: <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/mcp_best_practices.md">üìã View Best Practices</a> - Core guidelines for all MCP servers</li>
</ul>
<p><strong>For Python implementations, also load:</strong></p>
<ul>
<li><strong>Python SDK Documentation</strong>: Use WebFetch to load <code>https://raw.githubusercontent.com/modelcontextprotocol/python-sdk/main/README.md</code></li>
<li><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/python_mcp_server.md">üêç Python Implementation Guide</a> - Python-specific best practices and examples</li>
</ul>
<p><strong>For Node/TypeScript implementations, also load:</strong></p>
<ul>
<li><strong>TypeScript SDK Documentation</strong>: Use WebFetch to load <code>https://raw.githubusercontent.com/modelcontextprotocol/typescript-sdk/main/README.md</code></li>
<li><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/node_mcp_server.md">‚ö° TypeScript Implementation Guide</a> - Node/TypeScript-specific best practices and examples</li>
</ul>
<h4>1.5 Exhaustively Study API Documentation</h4>
<p>To integrate a service, read through <strong>ALL</strong> available API documentation:</p>
<ul>
<li>Official API reference documentation</li>
<li>Authentication and authorization requirements</li>
<li>Rate limiting and pagination patterns</li>
<li>Error responses and status codes</li>
<li>Available endpoints and their parameters</li>
<li>Data models and schemas</li>
</ul>
<p><strong>To gather comprehensive information, use web search and the WebFetch tool as needed.</strong></p>
<h4>1.6 Create a Comprehensive Implementation Plan</h4>
<p>Based on your research, create a detailed plan that includes:</p>
<p><strong>Tool Selection:</strong></p>
<ul>
<li>List the most valuable endpoints/operations to implement</li>
<li>Prioritize tools that enable the most common and important use cases</li>
<li>Consider which tools work together to enable complex workflows</li>
</ul>
<p><strong>Shared Utilities and Helpers:</strong></p>
<ul>
<li>Identify common API request patterns</li>
<li>Plan pagination helpers</li>
<li>Design filtering and formatting utilities</li>
<li>Plan error handling strategies</li>
</ul>
<p><strong>Input/Output Design:</strong></p>
<ul>
<li>Define input validation models (Pydantic for Python, Zod for TypeScript)</li>
<li>Design consistent response formats (e.g., JSON or Markdown), and configurable levels of detail (e.g., Detailed or Concise)</li>
<li>Plan for large-scale usage (thousands of users/resources)</li>
<li>Implement character limits and truncation strategies (e.g., 25,000 tokens)</li>
</ul>
<p><strong>Error Handling Strategy:</strong></p>
<ul>
<li>Plan graceful failure modes</li>
<li>Design clear, actionable, LLM-friendly, natural language error messages which prompt further action</li>
<li>Consider rate limiting and timeout scenarios</li>
<li>Handle authentication and authorization errors</li>
</ul>
<hr>
<h3>Phase 2: Implementation</h3>
<p>Now that you have a comprehensive plan, begin implementation following language-specific best practices.</p>
<h4>2.1 Set Up Project Structure</h4>
<p><strong>For Python:</strong></p>
<ul>
<li>Create a single <code>.py</code> file or organize into modules if complex (see <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/python_mcp_server.md">üêç Python Guide</a>)</li>
<li>Use the MCP Python SDK for tool registration</li>
<li>Define Pydantic models for input validation</li>
</ul>
<p><strong>For Node/TypeScript:</strong></p>
<ul>
<li>Create proper project structure (see <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/node_mcp_server.md">‚ö° TypeScript Guide</a>)</li>
<li>Set up <code>package.json</code> and <code>tsconfig.json</code></li>
<li>Use MCP TypeScript SDK</li>
<li>Define Zod schemas for input validation</li>
</ul>
<h4>2.2 Implement Core Infrastructure First</h4>
<p><strong>To begin implementation, create shared utilities before implementing tools:</strong></p>
<ul>
<li>API request helper functions</li>
<li>Error handling utilities</li>
<li>Response formatting functions (JSON and Markdown)</li>
<li>Pagination helpers</li>
<li>Authentication/token management</li>
</ul>
<h4>2.3 Implement Tools Systematically</h4>
<p>For each tool in the plan:</p>
<p><strong>Define Input Schema:</strong></p>
<ul>
<li>Use Pydantic (Python) or Zod (TypeScript) for validation</li>
<li>Include proper constraints (min/max length, regex patterns, min/max values, ranges)</li>
<li>Provide clear, descriptive field descriptions</li>
<li>Include diverse examples in field descriptions</li>
</ul>
<p><strong>Write Comprehensive Docstrings/Descriptions:</strong></p>
<ul>
<li>One-line summary of what the tool does</li>
<li>Detailed explanation of purpose and functionality</li>
<li>Explicit parameter types with examples</li>
<li>Complete return type schema</li>
<li>Usage examples (when to use, when not to use)</li>
<li>Error handling documentation, which outlines how to proceed given specific errors</li>
</ul>
<p><strong>Implement Tool Logic:</strong></p>
<ul>
<li>Use shared utilities to avoid code duplication</li>
<li>Follow async/await patterns for all I/O</li>
<li>Implement proper error handling</li>
<li>Support multiple response formats (JSON and Markdown)</li>
<li>Respect pagination parameters</li>
<li>Check character limits and truncate appropriately</li>
</ul>
<p><strong>Add Tool Annotations:</strong></p>
<ul>
<li><code>readOnlyHint</code>: true (for read-only operations)</li>
<li><code>destructiveHint</code>: false (for non-destructive operations)</li>
<li><code>idempotentHint</code>: true (if repeated calls have same effect)</li>
<li><code>openWorldHint</code>: true (if interacting with external systems)</li>
</ul>
<h4>2.4 Follow Language-Specific Best Practices</h4>
<p><strong>At this point, load the appropriate language guide:</strong></p>
<p><strong>For Python: Load <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/python_mcp_server.md">üêç Python Implementation Guide</a> and ensure the following:</strong></p>
<ul>
<li>Using MCP Python SDK with proper tool registration</li>
<li>Pydantic v2 models with <code>model_config</code></li>
<li>Type hints throughout</li>
<li>Async/await for all I/O operations</li>
<li>Proper imports organization</li>
<li>Module-level constants (CHARACTER_LIMIT, API_BASE_URL)</li>
</ul>
<p><strong>For Node/TypeScript: Load <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/node_mcp_server.md">‚ö° TypeScript Implementation Guide</a> and ensure the following:</strong></p>
<ul>
<li>Using <code>server.registerTool</code> properly</li>
<li>Zod schemas with <code>.strict()</code></li>
<li>TypeScript strict mode enabled</li>
<li>No <code>any</code> types - use proper types</li>
<li>Explicit Promise<T> return types</li>
<li>Build process configured (<code>npm run build</code>)</li>
</ul>
<hr>
<h3>Phase 3: Review and Refine</h3>
<p>After initial implementation:</p>
<h4>3.1 Code Quality Review</h4>
<p>To ensure quality, review the code for:</p>
<ul>
<li><strong>DRY Principle</strong>: No duplicated code between tools</li>
<li><strong>Composability</strong>: Shared logic extracted into functions</li>
<li><strong>Consistency</strong>: Similar operations return similar formats</li>
<li><strong>Error Handling</strong>: All external calls have error handling</li>
<li><strong>Type Safety</strong>: Full type coverage (Python type hints, TypeScript types)</li>
<li><strong>Documentation</strong>: Every tool has comprehensive docstrings/descriptions</li>
</ul>
<h4>3.2 Test and Build</h4>
<p><strong>Important:</strong> MCP servers are long-running processes that wait for requests over stdio/stdin or sse/http. Running them directly in your main process (e.g., <code>python server.py</code> or <code>node dist/index.js</code>) will cause your process to hang indefinitely.</p>
<p><strong>Safe ways to test the server:</strong></p>
<ul>
<li>Use the evaluation harness (see Phase 4) - recommended approach</li>
<li>Run the server in tmux to keep it outside your main process</li>
<li>Use a timeout when testing: <code>timeout 5s python server.py</code></li>
</ul>
<p><strong>For Python:</strong></p>
<ul>
<li>Verify Python syntax: <code>python -m py_compile your_server.py</code></li>
<li>Check imports work correctly by reviewing the file</li>
<li>To manually test: Run server in tmux, then test with evaluation harness in main process</li>
<li>Or use the evaluation harness directly (it manages the server for stdio transport)</li>
</ul>
<p><strong>For Node/TypeScript:</strong></p>
<ul>
<li>Run <code>npm run build</code> and ensure it completes without errors</li>
<li>Verify dist/index.js is created</li>
<li>To manually test: Run server in tmux, then test with evaluation harness in main process</li>
<li>Or use the evaluation harness directly (it manages the server for stdio transport)</li>
</ul>
<h4>3.3 Use Quality Checklist</h4>
<p>To verify implementation quality, load the appropriate checklist from the language-specific guide:</p>
<ul>
<li>Python: see &quot;Quality Checklist&quot; in <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/python_mcp_server.md">üêç Python Guide</a></li>
<li>Node/TypeScript: see &quot;Quality Checklist&quot; in <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/node_mcp_server.md">‚ö° TypeScript Guide</a></li>
</ul>
<hr>
<h3>Phase 4: Create Evaluations</h3>
<p>After implementing your MCP server, create comprehensive evaluations to test its effectiveness.</p>
<p><strong>Load <a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/evaluation.md">‚úÖ Evaluation Guide</a> for complete evaluation guidelines.</strong></p>
<h4>4.1 Understand Evaluation Purpose</h4>
<p>Evaluations test whether LLMs can effectively use your MCP server to answer realistic, complex questions.</p>
<h4>4.2 Create 10 Evaluation Questions</h4>
<p>To create effective evaluations, follow the process outlined in the evaluation guide:</p>
<ol>
<li><strong>Tool Inspection</strong>: List available tools and understand their capabilities</li>
<li><strong>Content Exploration</strong>: Use READ-ONLY operations to explore available data</li>
<li><strong>Question Generation</strong>: Create 10 complex, realistic questions</li>
<li><strong>Answer Verification</strong>: Solve each question yourself to verify answers</li>
</ol>
<h4>4.3 Evaluation Requirements</h4>
<p>Each question must be:</p>
<ul>
<li><strong>Independent</strong>: Not dependent on other questions</li>
<li><strong>Read-only</strong>: Only non-destructive operations required</li>
<li><strong>Complex</strong>: Requiring multiple tool calls and deep exploration</li>
<li><strong>Realistic</strong>: Based on real use cases humans would care about</li>
<li><strong>Verifiable</strong>: Single, clear answer that can be verified by string comparison</li>
<li><strong>Stable</strong>: Answer won&#39;t change over time</li>
</ul>
<h4>4.4 Output Format</h4>
<p>Create an XML file with this structure:</p>
<pre><code class="language-xml">&lt;evaluation&gt;
  &lt;qa_pair&gt;
    &lt;question&gt;Find discussions about AI model launches with animal codenames. One model needed a specific safety designation that uses the format ASL-X. What number X was being determined for the model named after a spotted wild cat?&lt;/question&gt;
    &lt;answer&gt;3&lt;/answer&gt;
  &lt;/qa_pair&gt;
&lt;!-- More qa_pairs... --&gt;
&lt;/evaluation&gt;
</code></pre>
<hr>
<h1>Reference Files</h1>
<h2>üìö Documentation Library</h2>
<p>Load these resources as needed during development:</p>
<h3>Core MCP Documentation (Load First)</h3>
<ul>
<li><strong>MCP Protocol</strong>: Fetch from <code>https://modelcontextprotocol.io/llms-full.txt</code> - Complete MCP specification</li>
<li><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/mcp_best_practices.md">üìã MCP Best Practices</a> - Universal MCP guidelines including:<ul>
<li>Server and tool naming conventions</li>
<li>Response format guidelines (JSON vs Markdown)</li>
<li>Pagination best practices</li>
<li>Character limits and truncation strategies</li>
<li>Tool development guidelines</li>
<li>Security and error handling standards</li>
</ul>
</li>
</ul>
<h3>SDK Documentation (Load During Phase 1/2)</h3>
<ul>
<li><strong>Python SDK</strong>: Fetch from <code>https://raw.githubusercontent.com/modelcontextprotocol/python-sdk/main/README.md</code></li>
<li><strong>TypeScript SDK</strong>: Fetch from <code>https://raw.githubusercontent.com/modelcontextprotocol/typescript-sdk/main/README.md</code></li>
</ul>
<h3>Language-Specific Implementation Guides (Load During Phase 2)</h3>
<ul>
<li><p><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/python_mcp_server.md">üêç Python Implementation Guide</a> - Complete Python/FastMCP guide with:</p>
<ul>
<li>Server initialization patterns</li>
<li>Pydantic model examples</li>
<li>Tool registration with <code>@mcp.tool</code></li>
<li>Complete working examples</li>
<li>Quality checklist</li>
</ul>
</li>
<li><p><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/node_mcp_server.md">‚ö° TypeScript Implementation Guide</a> - Complete TypeScript guide with:</p>
<ul>
<li>Project structure</li>
<li>Zod schema patterns</li>
<li>Tool registration with <code>server.registerTool</code></li>
<li>Complete working examples</li>
<li>Quality checklist</li>
</ul>
</li>
</ul>
<h3>Evaluation Guide (Load During Phase 4)</h3>
<ul>
<li><a href="https://github.com/openclaw/skills/blob/main/skills/seanphan/mcp-builder/./reference/evaluation.md">‚úÖ Evaluation Guide</a> - Complete evaluation creation guide with:<ul>
<li>Question creation guidelines</li>
<li>Answer verification strategies</li>
<li>XML format specifications</li>
<li>Example questions and answers</li>
<li>Running an evaluation with the provided scripts</li>
</ul>
</li>
</ul>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/seanphan/mcp-builder/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/seanphan/mcp-builder" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/seanphan/mcp-builder/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@seanphan</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Coding Agents & IDEs</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>