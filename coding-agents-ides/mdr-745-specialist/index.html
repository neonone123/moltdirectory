<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="EU MDR 2017/745 compliance specialist">
  <title>mdr-745-specialist - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/coding-agents-ides/mdr-745-specialist/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/coding-agents-ides/" class="back-link">‚Üê Back to Coding Agents & IDEs</a>
              <div class="skill-page-meta">
                <a href="/coding-agents-ides/" class="skill-page-category">Coding Agents & IDEs</a>
                <span class="skill-page-author">by @alirezarezvani</span>
              </div>
              <h1 class="skill-page-title">mdr-745-specialist</h1>
              <p class="skill-page-desc">EU MDR 2017/745 compliance specialist</p>
              <div class="vote-widget skill-page-vote" data-category-id="coding-agents-ides" data-tool-id="mdr-745-specialist">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote mdr-745-specialist">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote mdr-745-specialist">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>MDR 2017/745 Specialist</h1>
<p>EU MDR compliance patterns for medical device classification, technical documentation, and clinical evidence.</p>
<hr>
<h2>Table of Contents</h2>
<ul>
<li><a href="#device-classification-workflow">Device Classification Workflow</a></li>
<li><a href="#technical-documentation">Technical Documentation</a></li>
<li><a href="#clinical-evidence">Clinical Evidence</a></li>
<li><a href="#post-market-surveillance">Post-Market Surveillance</a></li>
<li><a href="#eudamed-and-udi">EUDAMED and UDI</a></li>
<li><a href="#reference-documentation">Reference Documentation</a></li>
<li><a href="#tools">Tools</a></li>
</ul>
<hr>
<h2>Device Classification Workflow</h2>
<p>Classify device under MDR Annex VIII:</p>
<ol>
<li>Identify device duration (transient, short-term, long-term)</li>
<li>Determine invasiveness level (non-invasive, body orifice, surgical)</li>
<li>Assess body system contact (CNS, cardiac, other)</li>
<li>Check if active device (energy dependent)</li>
<li>Apply classification rules 1-22</li>
<li>For software, apply MDCG 2019-11 algorithm</li>
<li>Document classification rationale</li>
<li><strong>Validation:</strong> Classification confirmed with Notified Body</li>
</ol>
<h3>Classification Matrix</h3>
<table>
<thead>
<tr>
<th>Factor</th>
<th>Class I</th>
<th>Class IIa</th>
<th>Class IIb</th>
<th>Class III</th>
</tr>
</thead>
<tbody><tr>
<td>Duration</td>
<td>Any</td>
<td>Short-term</td>
<td>Long-term</td>
<td>Long-term</td>
</tr>
<tr>
<td>Invasiveness</td>
<td>Non-invasive</td>
<td>Body orifice</td>
<td>Surgical</td>
<td>Implantable</td>
</tr>
<tr>
<td>System</td>
<td>Any</td>
<td>Non-critical</td>
<td>Critical organs</td>
<td>CNS/cardiac</td>
</tr>
<tr>
<td>Risk</td>
<td>Lowest</td>
<td>Low-medium</td>
<td>Medium-high</td>
<td>Highest</td>
</tr>
</tbody></table>
<h3>Software Classification (MDCG 2019-11)</h3>
<table>
<thead>
<tr>
<th>Information Use</th>
<th>Condition Severity</th>
<th>Class</th>
</tr>
</thead>
<tbody><tr>
<td>Informs decision</td>
<td>Non-serious</td>
<td>IIa</td>
</tr>
<tr>
<td>Informs decision</td>
<td>Serious</td>
<td>IIb</td>
</tr>
<tr>
<td>Drives/treats</td>
<td>Critical</td>
<td>III</td>
</tr>
</tbody></table>
<h3>Classification Examples</h3>
<p><strong>Example 1: Absorbable Surgical Suture</strong></p>
<ul>
<li>Rule 8 (implantable, long-term)</li>
<li>Duration: &gt; 30 days (absorbed)</li>
<li>Contact: General tissue</li>
<li>Classification: <strong>Class IIb</strong></li>
</ul>
<p><strong>Example 2: AI Diagnostic Software</strong></p>
<ul>
<li>Rule 11 + MDCG 2019-11</li>
<li>Function: Diagnoses serious condition</li>
<li>Classification: <strong>Class IIb</strong></li>
</ul>
<p><strong>Example 3: Cardiac Pacemaker</strong></p>
<ul>
<li>Rule 8 (implantable)</li>
<li>Contact: Central circulatory system</li>
<li>Classification: <strong>Class III</strong></li>
</ul>
<hr>
<h2>Technical Documentation</h2>
<p>Prepare technical file per Annex II and III:</p>
<ol>
<li>Create device description (variants, accessories, intended purpose)</li>
<li>Develop labeling (Article 13 requirements, IFU)</li>
<li>Document design and manufacturing process</li>
<li>Complete GSPR compliance matrix</li>
<li>Prepare benefit-risk analysis</li>
<li>Compile verification and validation evidence</li>
<li>Integrate risk management file (ISO 14971)</li>
<li><strong>Validation:</strong> Technical file reviewed for completeness</li>
</ol>
<h3>Technical File Structure</h3>
<pre><code>ANNEX II TECHNICAL DOCUMENTATION
‚îú‚îÄ‚îÄ Device description and UDI-DI
‚îú‚îÄ‚îÄ Label and instructions for use
‚îú‚îÄ‚îÄ Design and manufacturing info
‚îú‚îÄ‚îÄ GSPR compliance matrix
‚îú‚îÄ‚îÄ Benefit-risk analysis
‚îú‚îÄ‚îÄ Verification and validation
‚îî‚îÄ‚îÄ Clinical evaluation report
</code></pre>
<h3>GSPR Compliance Checklist</h3>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Evidence</th>
<th>Status</th>
</tr>
</thead>
<tbody><tr>
<td>Safe design (GSPR 1-3)</td>
<td>Risk management file</td>
<td>‚òê</td>
</tr>
<tr>
<td>Chemical properties (GSPR 10.1)</td>
<td>Biocompatibility report</td>
<td>‚òê</td>
</tr>
<tr>
<td>Infection risk (GSPR 10.2)</td>
<td>Sterilization validation</td>
<td>‚òê</td>
</tr>
<tr>
<td>Software requirements (GSPR 17)</td>
<td>IEC 62304 documentation</td>
<td>‚òê</td>
</tr>
<tr>
<td>Labeling (GSPR 23)</td>
<td>Label artwork, IFU</td>
<td>‚òê</td>
</tr>
</tbody></table>
<h3>Conformity Assessment Routes</h3>
<table>
<thead>
<tr>
<th>Class</th>
<th>Route</th>
<th>NB Involvement</th>
</tr>
</thead>
<tbody><tr>
<td>I</td>
<td>Annex II self-declaration</td>
<td>None</td>
</tr>
<tr>
<td>Is/Im</td>
<td>Annex II + IX/XI</td>
<td>Sterile/measuring aspects</td>
</tr>
<tr>
<td>IIa</td>
<td>Annex II + IX or XI</td>
<td>Product or QMS</td>
</tr>
<tr>
<td>IIb</td>
<td>Annex IX + X or X + XI</td>
<td>Type exam + production</td>
</tr>
<tr>
<td>III</td>
<td>Annex IX + X</td>
<td>Full QMS + type exam</td>
</tr>
</tbody></table>
<hr>
<h2>Clinical Evidence</h2>
<p>Develop clinical evidence strategy per Annex XIV:</p>
<ol>
<li>Define clinical claims and endpoints</li>
<li>Conduct systematic literature search</li>
<li>Appraise clinical data quality</li>
<li>Assess equivalence (technical, biological, clinical)</li>
<li>Identify evidence gaps</li>
<li>Determine if clinical investigation required</li>
<li>Prepare Clinical Evaluation Report (CER)</li>
<li><strong>Validation:</strong> CER reviewed by qualified evaluator</li>
</ol>
<h3>Evidence Requirements by Class</h3>
<table>
<thead>
<tr>
<th>Class</th>
<th>Minimum Evidence</th>
<th>Investigation</th>
</tr>
</thead>
<tbody><tr>
<td>I</td>
<td>Risk-benefit analysis</td>
<td>Not typically required</td>
</tr>
<tr>
<td>IIa</td>
<td>Literature + post-market</td>
<td>May be required</td>
</tr>
<tr>
<td>IIb</td>
<td>Systematic literature review</td>
<td>Often required</td>
</tr>
<tr>
<td>III</td>
<td>Comprehensive clinical data</td>
<td>Required (Article 61)</td>
</tr>
</tbody></table>
<h3>Clinical Evaluation Report Structure</h3>
<pre><code>CER CONTENTS
‚îú‚îÄ‚îÄ Executive summary
‚îú‚îÄ‚îÄ Device scope and intended purpose
‚îú‚îÄ‚îÄ Clinical background (state of the art)
‚îú‚îÄ‚îÄ Literature search methodology
‚îú‚îÄ‚îÄ Data appraisal and analysis
‚îú‚îÄ‚îÄ Safety and performance conclusions
‚îú‚îÄ‚îÄ Benefit-risk determination
‚îî‚îÄ‚îÄ PMCF plan summary
</code></pre>
<h3>Qualified Evaluator Requirements</h3>
<ul>
<li>Medical degree or equivalent healthcare qualification</li>
<li>4+ years clinical experience in relevant field</li>
<li>Training in clinical evaluation methodology</li>
<li>Understanding of MDR requirements</li>
</ul>
<hr>
<h2>Post-Market Surveillance</h2>
<p>Establish PMS system per Chapter VII:</p>
<ol>
<li>Develop PMS plan (Article 84)</li>
<li>Define data collection methods</li>
<li>Establish complaint handling procedures</li>
<li>Create vigilance reporting process</li>
<li>Plan Periodic Safety Update Reports (PSUR)</li>
<li>Integrate with PMCF activities</li>
<li>Define trend analysis and signal detection</li>
<li><strong>Validation:</strong> PMS system audited annually</li>
</ol>
<h3>PMS System Components</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Requirement</th>
<th>Frequency</th>
</tr>
</thead>
<tbody><tr>
<td>PMS Plan</td>
<td>Article 84</td>
<td>Maintain current</td>
</tr>
<tr>
<td>PSUR</td>
<td>Class IIa and higher</td>
<td>Per class schedule</td>
</tr>
<tr>
<td>PMCF Plan</td>
<td>Annex XIV Part B</td>
<td>Update with CER</td>
</tr>
<tr>
<td>PMCF Report</td>
<td>Annex XIV Part B</td>
<td>Annual (Class III)</td>
</tr>
<tr>
<td>Vigilance</td>
<td>Articles 87-92</td>
<td>As events occur</td>
</tr>
</tbody></table>
<h3>PSUR Schedule</h3>
<table>
<thead>
<tr>
<th>Class</th>
<th>Frequency</th>
</tr>
</thead>
<tbody><tr>
<td>Class III</td>
<td>Annual</td>
</tr>
<tr>
<td>Class IIb implantable</td>
<td>Annual</td>
</tr>
<tr>
<td>Class IIb</td>
<td>Every 2 years</td>
</tr>
<tr>
<td>Class IIa</td>
<td>When necessary</td>
</tr>
</tbody></table>
<h3>Serious Incident Reporting</h3>
<table>
<thead>
<tr>
<th>Timeline</th>
<th>Requirement</th>
</tr>
</thead>
<tbody><tr>
<td>2 days</td>
<td>Serious public health threat</td>
</tr>
<tr>
<td>10 days</td>
<td>Death or serious deterioration</td>
</tr>
<tr>
<td>15 days</td>
<td>Other serious incidents</td>
</tr>
</tbody></table>
<hr>
<h2>EUDAMED and UDI</h2>
<p>Implement UDI system per Article 27:</p>
<ol>
<li>Obtain issuing entity code (GS1, HIBCC, ICCBBA)</li>
<li>Assign UDI-DI to each device variant</li>
<li>Assign UDI-PI (production identifier)</li>
<li>Apply UDI carrier to labels (AIDC + HRI)</li>
<li>Register actor in EUDAMED</li>
<li>Register devices in EUDAMED</li>
<li>Upload certificates when available</li>
<li><strong>Validation:</strong> UDI verified on sample labels</li>
</ol>
<h3>EUDAMED Modules</h3>
<table>
<thead>
<tr>
<th>Module</th>
<th>Content</th>
<th>Actor</th>
</tr>
</thead>
<tbody><tr>
<td>Actor</td>
<td>Company registration</td>
<td>Manufacturer, AR</td>
</tr>
<tr>
<td>UDI/Device</td>
<td>Device and variant data</td>
<td>Manufacturer</td>
</tr>
<tr>
<td>Certificates</td>
<td>NB certificates</td>
<td>Notified Body</td>
</tr>
<tr>
<td>Clinical Investigation</td>
<td>Study registration</td>
<td>Sponsor</td>
</tr>
<tr>
<td>Vigilance</td>
<td>Incident reports</td>
<td>Manufacturer</td>
</tr>
<tr>
<td>Market Surveillance</td>
<td>Authority actions</td>
<td>Competent Authority</td>
</tr>
</tbody></table>
<h3>UDI Label Requirements</h3>
<p>Required elements per Article 13:</p>
<ul>
<li><input disabled="" type="checkbox"> UDI-DI (device identifier)</li>
<li><input disabled="" type="checkbox"> UDI-PI (production identifier) for Class II+</li>
<li><input disabled="" type="checkbox"> AIDC format (barcode/RFID)</li>
<li><input disabled="" type="checkbox"> HRI format (human-readable)</li>
<li><input disabled="" type="checkbox"> Manufacturer name and address</li>
<li><input disabled="" type="checkbox"> Lot/serial number</li>
<li><input disabled="" type="checkbox"> Expiration date (if applicable)</li>
</ul>
<hr>
<h2>Reference Documentation</h2>
<h3>MDR Classification Guide</h3>
<p><code>references/mdr-classification-guide.md</code> contains:</p>
<ul>
<li>Complete Annex VIII classification rules (Rules 1-22)</li>
<li>Software classification per MDCG 2019-11</li>
<li>Worked classification examples</li>
<li>Conformity assessment route selection</li>
</ul>
<h3>Clinical Evidence Requirements</h3>
<p><code>references/clinical-evidence-requirements.md</code> contains:</p>
<ul>
<li>Clinical evidence framework and hierarchy</li>
<li>Literature search methodology</li>
<li>Clinical Evaluation Report structure</li>
<li>PMCF plan and evaluation report guidance</li>
</ul>
<h3>Technical Documentation Templates</h3>
<p><code>references/technical-documentation-templates.md</code> contains:</p>
<ul>
<li>Annex II and III content requirements</li>
<li>Design History File structure</li>
<li>GSPR compliance matrix template</li>
<li>Declaration of Conformity template</li>
<li>Notified Body submission checklist</li>
</ul>
<hr>
<h2>Tools</h2>
<h3>MDR Gap Analyzer</h3>
<pre><code class="language-bash"># Quick gap analysis
python scripts/mdr_gap_analyzer.py --device &quot;Device Name&quot; --class IIa

# JSON output for integration
python scripts/mdr_gap_analyzer.py --device &quot;Device Name&quot; --class III --output json

# Interactive assessment
python scripts/mdr_gap_analyzer.py --interactive
</code></pre>
<p>Analyzes device against MDR requirements, identifies compliance gaps, generates prioritized recommendations.</p>
<p><strong>Output includes:</strong></p>
<ul>
<li>Requirements checklist by category</li>
<li>Gap identification with priorities</li>
<li>Critical gap highlighting</li>
<li>Compliance roadmap recommendations</li>
</ul>
<hr>
<h2>Notified Body Interface</h2>
<h3>Selection Criteria</h3>
<table>
<thead>
<tr>
<th>Factor</th>
<th>Considerations</th>
</tr>
</thead>
<tbody><tr>
<td>Designation scope</td>
<td>Covers your device type</td>
</tr>
<tr>
<td>Capacity</td>
<td>Timeline for initial audit</td>
</tr>
<tr>
<td>Geographic reach</td>
<td>Markets you need to access</td>
</tr>
<tr>
<td>Technical expertise</td>
<td>Experience with your technology</td>
</tr>
<tr>
<td>Fee structure</td>
<td>Transparency, predictability</td>
</tr>
</tbody></table>
<h3>Pre-Submission Checklist</h3>
<ul>
<li><input disabled="" type="checkbox"> Technical documentation complete</li>
<li><input disabled="" type="checkbox"> GSPR matrix fully addressed</li>
<li><input disabled="" type="checkbox"> Risk management file current</li>
<li><input disabled="" type="checkbox"> Clinical evaluation report complete</li>
<li><input disabled="" type="checkbox"> QMS (ISO 13485) certified</li>
<li><input disabled="" type="checkbox"> Labeling and IFU finalized</li>
<li><input disabled="" type="checkbox"> <strong>Validation:</strong> Internal gap assessment complete</li>
</ul>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/alirezarezvani/mdr-745-specialist/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/alirezarezvani/mdr-745-specialist" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/alirezarezvani/mdr-745-specialist/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@alirezarezvani</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Coding Agents & IDEs</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>