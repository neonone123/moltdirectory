<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generate hyper-personalized cold email sequences using AI">
  <title>cold-email - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/marketing-sales/cold-email/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/marketing-sales/" class="back-link">‚Üê Back to Marketing & Sales</a>
              <div class="skill-page-meta">
                <a href="/marketing-sales/" class="skill-page-category">Marketing & Sales</a>
                <span class="skill-page-author">by @bluecraft-ai</span>
              </div>
              <h1 class="skill-page-title">cold-email</h1>
              <p class="skill-page-desc">Generate hyper-personalized cold email sequences using AI</p>
              <div class="vote-widget skill-page-vote" data-category-id="marketing-sales" data-tool-id="cold-email">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote cold-email">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote cold-email">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>MachFive - AI Cold Email Generator</h1>
<p>Generate personalized cold email sequences from lead data. MachFive uses AI to research prospects and craft unique, relevant outreach - not templates.</p>
<h2>Setup</h2>
<ol>
<li>Get your API key at <a href="https://app.machfive.io/settings">https://app.machfive.io/settings</a> (Integrations ‚Üí API Keys)</li>
<li>Set <code>MACHFIVE_API_KEY</code> in your environment</li>
</ol>
<h2>Campaign ID</h2>
<p>Every generate request needs a <strong>campaign ID</strong> in the URL: <code>/api/v1/campaigns/{campaign_id}/generate</code> (or <code>/generate-batch</code>).</p>
<ul>
<li><strong>If the user has not provided a campaign name or ID:</strong> Call <strong>GET /api/v1/campaigns</strong> (see below) to list campaigns in their workspace, then ask them to pick one by name or ID before running generate.</li>
<li><strong>Where to get it manually:</strong> <a href="https://app.machfive.io/campaigns">https://app.machfive.io/campaigns</a> ‚Üí open a campaign ‚Üí copy the ID from the URL or settings.</li>
<li><strong>No default:</strong> The skill does not assume a campaign. The user (or agent config) must provide one. Agents can store a default campaign ID for the workspace if the user provides it (e.g. &quot;use campaign X for my requests&quot;).</li>
</ul>
<h2>Endpoints</h2>
<h3>List Campaigns (discover before generate)</h3>
<p>List campaigns in the workspace so the agent can ask the user which campaign to use when they haven&#39;t provided a name or ID.</p>
<pre><code>GET https://app.machfive.io/api/v1/campaigns
Authorization: Bearer {MACHFIVE_API_KEY}
</code></pre>
<p>Or use <code>X-API-Key: {MACHFIVE_API_KEY}</code> header.</p>
<p>Optional query: <code>?q=search</code> or <code>?name=search</code> to filter by campaign name.</p>
<p><strong>Response (200):</strong></p>
<pre><code class="language-json">{
  &quot;campaigns&quot;: [
    { &quot;id&quot;: &quot;cb1bbb14-e576-4d8f-a8f3-6fa929076fd8&quot;, &quot;name&quot;: &quot;SaaS Q1 Outreach&quot;, &quot;created_at&quot;: &quot;2025-01-15T12:00:00Z&quot; },
    { &quot;id&quot;: &quot;a1b2c3d4-...&quot;, &quot;name&quot;: &quot;Enterprise Leads&quot;, &quot;created_at&quot;: &quot;2025-01-10T08:00:00Z&quot; }
  ]
}
</code></pre>
<p>If no campaign name or ID was given, call this first, then ask the user: &quot;Which campaign should I use? [list names/IDs].&quot;</p>
<h3>Single Lead (Sync)</h3>
<p>Generate an email sequence for one lead (3‚Äì5 emails per lead). Waits for completion, returns the sequence directly. <strong>The request can take 3‚Äì5 minutes</strong> (AI research + generation); use a client timeout of at least <strong>300 seconds (5 min)</strong> or <strong>600 seconds (10 min)</strong>. Do not use a 120s timeout or the response will be cut off.</p>
<pre><code>POST https://app.machfive.io/api/v1/campaigns/{campaign_id}/generate
Authorization: Bearer {MACHFIVE_API_KEY}
Content-Type: application/json
</code></pre>
<p>Or use <code>X-API-Key: {MACHFIVE_API_KEY}</code> header.</p>
<pre><code class="language-json">{
  &quot;lead&quot;: {
    &quot;name&quot;: &quot;John Smith&quot;,
    &quot;title&quot;: &quot;VP of Marketing&quot;,
    &quot;company&quot;: &quot;Acme Corp&quot;,
    &quot;email&quot;: &quot;john@acme.com&quot;,
    &quot;company_website&quot;: &quot;https://acme.com&quot;,
    &quot;linkedin_url&quot;: &quot;https://linkedin.com/in/johnsmith&quot;
  },
  &quot;options&quot;: {
    &quot;list_name&quot;: &quot;Q1 Outreach&quot;,
    &quot;email_count&quot;: 3,
    &quot;email_signature&quot;: &quot;Best,\nYour Name&quot;,
    &quot;approved_ctas&quot;: [&quot;Direct Meeting CTA&quot;, &quot;Lead Magnet CTA&quot;]
  }
}
</code></pre>
<p><strong>Response (200):</strong></p>
<pre><code class="language-json">{
  &quot;lead_id&quot;: &quot;lead_xyz789&quot;,
  &quot;list_id&quot;: &quot;uuid&quot;,
  &quot;sequence&quot;: [
    { &quot;step&quot;: 1, &quot;subject&quot;: &quot;...&quot;, &quot;body&quot;: &quot;...&quot; },
    { &quot;step&quot;: 2, &quot;subject&quot;: &quot;...&quot;, &quot;body&quot;: &quot;...&quot; },
    { &quot;step&quot;: 3, &quot;subject&quot;: &quot;...&quot;, &quot;body&quot;: &quot;...&quot; }
  ],
  &quot;credits_remaining&quot;: 94
}
</code></pre>
<p><strong>Recovery:</strong> The response includes <code>list_id</code>. If the request times out or the response is truncated, you can still get the result: call <strong>GET /api/v1/lists/{list_id}</strong> to confirm status, then <strong>GET /api/v1/lists/{list_id}/export?format=json</strong> to retrieve the sequence.</p>
<h3>Batch (Async)</h3>
<p>Generate email sequences for multiple leads (one list; each lead gets a sequence). <strong>Returns immediately</strong> (202) with <code>list_id</code>; processing runs in the background. To get results: poll list status, then call export.</p>
<pre><code>POST https://app.machfive.io/api/v1/campaigns/{campaign_id}/generate-batch
Authorization: Bearer {MACHFIVE_API_KEY}
Content-Type: application/json
</code></pre>
<p>Or use <code>X-API-Key: {MACHFIVE_API_KEY}</code> header.</p>
<pre><code class="language-json">{
  &quot;leads&quot;: [
    { &quot;name&quot;: &quot;John Smith&quot;, &quot;email&quot;: &quot;john@acme.com&quot;, &quot;company&quot;: &quot;Acme Corp&quot;, &quot;title&quot;: &quot;VP Marketing&quot; },
    { &quot;name&quot;: &quot;Jane Doe&quot;, &quot;email&quot;: &quot;jane@beta.com&quot;, &quot;company&quot;: &quot;Beta Inc&quot;, &quot;title&quot;: &quot;Director Sales&quot; }
  ],
  &quot;options&quot;: {
    &quot;list_name&quot;: &quot;Q1 Outreach Batch&quot;,
    &quot;email_count&quot;: 3
  }
}
</code></pre>
<p><strong>Response (202):</strong></p>
<pre><code class="language-json">{
  &quot;list_id&quot;: &quot;uuid&quot;,
  &quot;status&quot;: &quot;processing&quot;,
  &quot;leads_count&quot;: 2,
  &quot;message&quot;: &quot;Batch accepted. Poll list status or open in UI.&quot;
}
</code></pre>
<h3>List lead lists</h3>
<p>List lead lists in the workspace. Optional query: <code>campaign_id</code>, <code>status</code> (<code>pending</code> | <code>processing</code> | <code>completed</code> | <code>failed</code>), <code>limit</code> (default 50, max 100), <code>offset</code>.</p>
<pre><code>GET https://app.machfive.io/api/v1/lists
GET https://app.machfive.io/api/v1/lists?campaign_id={campaign_id}&amp;status=completed&amp;limit=20
Authorization: Bearer {MACHFIVE_API_KEY}
</code></pre>
<p><strong>Response (200):</strong> <code>{ &quot;lists&quot;: [ { &quot;id&quot;, &quot;campaign_id&quot;, &quot;custom_name&quot;, &quot;processing_status&quot;, &quot;created_at&quot;, &quot;completed_at&quot; }, ... ] }</code>. Order is <code>created_at</code> desc.</p>
<h3>List status (poll)</h3>
<p>Poll until the list is done. Use the <code>list_id</code> from generate or generate-batch.</p>
<pre><code>GET https://app.machfive.io/api/v1/lists/{list_id}
Authorization: Bearer {MACHFIVE_API_KEY}
</code></pre>
<p><strong>Response (200):</strong> <code>id</code>, <code>campaign_id</code>, <code>custom_name</code>, <code>processing_status</code> (<code>pending</code> | <code>processing</code> | <code>completed</code> | <code>failed</code>), <code>created_at</code>, <code>updated_at</code>. When <code>processing_status === &#39;completed&#39;</code>: <code>leads_count</code>, <code>emails_created</code>, <code>completed_at</code>. When <code>failed</code>: <code>failed_at</code>. <strong>404</strong> if list not found or not in workspace.</p>
<p>Poll every 10‚Äì30 seconds until <code>processing_status === &#39;completed&#39;</code> or <code>failed</code>. If <code>failed</code>, the list cannot be exported; retry by submitting a new batch.</p>
<h3>List export (get results)</h3>
<p>After status is <code>completed</code>, fetch the processed output. <strong>CSV</strong> (default) or <strong>JSON</strong>.</p>
<pre><code>GET https://app.machfive.io/api/v1/lists/{list_id}/export?format=csv
GET https://app.machfive.io/api/v1/lists/{list_id}/export?format=json
Authorization: Bearer {MACHFIVE_API_KEY}
</code></pre>
<ul>
<li><strong>format=csv</strong> (default): Returns the processed CSV (same as UI download), with <code>Content-Disposition: attachment; filename=&quot;MachFive-{list_id}.csv&quot;</code>.</li>
<li><strong>format=json</strong>: Returns <code>{ &quot;leads&quot;: [ { &quot;email&quot;: &quot;...&quot;, &quot;sequence&quot;: [ { &quot;step&quot;: 1, &quot;subject&quot;: &quot;...&quot;, &quot;body&quot;: &quot;...&quot; }, ... ] }, ... ] }</code>. Each lead may include optional <code>name</code>, <code>company</code>, <code>title</code> when present, e.g. <code>{ &quot;email&quot;: &quot;john@acme.com&quot;, &quot;name&quot;: &quot;John Smith&quot;, &quot;company&quot;: &quot;Acme Corp&quot;, &quot;title&quot;: &quot;VP Marketing&quot;, &quot;sequence&quot;: [ ... ] }</code>.</li>
<li><strong>409</strong> if list is not yet completed (poll GET /lists/:id first). <strong>404</strong> if list not found or not in workspace.</li>
</ul>
<p><strong>Batch flow:</strong> POST generate-batch ‚Üí 202 + list_id ‚Üí poll GET /lists/:id until <code>processing_status === &#39;completed&#39;</code> ‚Üí GET /lists/:id/export?format=csv or json ‚Üí return result to user.</p>
<h2>Lead Fields</h2>
<p>Each lead must include a valid <strong><code>email</code></strong>; it is used to map the lead through processing and to match generated sequences back to the lead in exports (same as the app UI). All other fields are optional but improve personalization.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>email</code></td>
<td><strong>Yes</strong></td>
<td>Lead&#39;s email address; used to map the lead through processing and in exports</td>
</tr>
<tr>
<td><code>name</code></td>
<td>No</td>
<td>Full name or first name (improves personalization)</td>
</tr>
<tr>
<td><code>company</code></td>
<td>No</td>
<td>Company name (improves personalization)</td>
</tr>
<tr>
<td><code>title</code></td>
<td>No</td>
<td>Job title (improves personalization)</td>
</tr>
<tr>
<td><code>company_website</code></td>
<td>No</td>
<td>Company URL for research</td>
</tr>
<tr>
<td><code>linkedin_url</code></td>
<td>No</td>
<td>LinkedIn profile for deeper personalization</td>
</tr>
</tbody></table>
<h2>Options</h2>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>list_name</code></td>
<td>string</td>
<td>Auto</td>
<td>Display name for this list in MachFive UI</td>
</tr>
<tr>
<td><code>email_count</code></td>
<td>number</td>
<td>3</td>
<td>Emails per lead (1-5)</td>
</tr>
<tr>
<td><code>email_signature</code></td>
<td>string</td>
<td>None</td>
<td>Signature appended to emails</td>
</tr>
<tr>
<td><code>campaign_angle</code></td>
<td>string</td>
<td>None</td>
<td>Context for personalization</td>
</tr>
<tr>
<td><code>approved_ctas</code></td>
<td>array</td>
<td>From campaign</td>
<td>CTAs to use (omit to use campaign defaults)</td>
</tr>
</tbody></table>
<h2>Limits</h2>
<ul>
<li><strong>Single lead (sync):</strong> Request can take 5‚Äì10 minutes; use a client timeout of at least 300s (5 min) or 600s (10 min).</li>
<li><strong>Batch (async):</strong> Returns 202 immediately; poll <strong>GET /api/v1/lists/{list_id}</strong> every 10‚Äì30s until <code>processing_status</code> is <code>completed</code> or <code>failed</code>. Workspaces have a concurrent batch limit; if you get <strong>429</strong>, retry later.</li>
<li><strong>List lists:</strong> Query param <code>limit</code> default 50, max 100; <code>offset</code> for pagination.</li>
</ul>
<h2>Errors</h2>
<table>
<thead>
<tr>
<th>Code</th>
<th>Error</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>400</td>
<td>BAD_REQUEST</td>
<td>Invalid JSON, missing <code>lead</code>/<code>leads</code>, or missing/invalid lead <code>email</code>; or campaign has no vector store</td>
</tr>
<tr>
<td>401</td>
<td>UNAUTHORIZED</td>
<td>Invalid or missing API key</td>
</tr>
<tr>
<td>402</td>
<td>INSUFFICIENT_CREDITS</td>
<td>Out of credits</td>
</tr>
<tr>
<td>403</td>
<td>FORBIDDEN</td>
<td>Campaign not in your workspace</td>
</tr>
<tr>
<td>404</td>
<td>NOT_FOUND</td>
<td>Campaign or list doesn&#39;t exist</td>
</tr>
<tr>
<td>409</td>
<td>NOT_READY</td>
<td>Export called before list completed (poll GET /lists/:id first)</td>
</tr>
<tr>
<td>429</td>
<td>WORKSPACE_LIMIT</td>
<td>Too many concurrent batch jobs; try again later</td>
</tr>
</tbody></table>
<h2>Usage Examples</h2>
<p>&quot;Generate a cold email for the VP of Sales at Stripe&quot;
&quot;Create outreach sequences for these 10 leads&quot;
&quot;Write a 3-email sequence targeting marketing directors at SaaS companies&quot;</p>
<h2>Pricing</h2>
<ul>
<li>Free: 100 credits/month</li>
<li>Starter: 2,000 credits/month</li>
<li>Growth: 5,000 credits/month</li>
<li>Enterprise: Custom credits/month</li>
<li>1 credit = 1 lead processed</li>
</ul>
<p>Get started: <a href="https://machfive.io">https://machfive.io</a></p>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/bluecraft-ai/cold-email/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/bluecraft-ai/cold-email" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/bluecraft-ai/cold-email/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@bluecraft-ai</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Marketing & Sales</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>