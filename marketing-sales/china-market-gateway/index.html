<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="**Name:** `china-market-gateway`">
  <title>china-market-gateway - OpenClaw Directory</title>
  <link rel="canonical" href="https://moltdirectory.com/marketing-sales/china-market-gateway/">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü¶û</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    // Apply saved theme before page renders to prevent flash
    (function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    })();
  </script>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo">

        <span class="logo-text">OpenClaw Directory</span>
      </a>
      <nav class="header-links">
        <a href="/start-here/" class="header-link">Start Here</a>
        <a href="/security-auditor" class="header-link">Security Auditor</a>
        <a href="https://github.com/neonone123/moltdirectory/issues/new?template=add-skill.yml" class="header-link" target="_blank" rel="noopener">Add Skill</a>
        <button class="theme-toggle" aria-label="Toggle theme" onclick="toggleTheme()">
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        </button>
        <a href="https://www.reddit.com/r/OpenClawDirectory/" class="header-link" target="_blank" rel="noopener" aria-label="Community">
          <svg viewBox="0 0 16 16" fill="currentColor" width="28" height="28"><path d="M6.167 8a.83.83 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661m1.843 3.647c.315 0 1.403-.038 1.976-.611a.23.23 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83s.83-.381.83-.83a.831.831 0 0 0-1.66 0z"/><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.2.2 0 0 0-.153.028.2.2 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224q-.03.17-.029.353c0 1.795 2.091 3.256 4.669 3.256s4.668-1.451 4.668-3.256c0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165"/></svg>
        </a>
      </nav>
    </div>
  </header>
  
          <section class="skill-page-header">
            <div class="skill-page-header-inner">
              <a href="/marketing-sales/" class="back-link">‚Üê Back to Marketing & Sales</a>
              <div class="skill-page-meta">
                <a href="/marketing-sales/" class="skill-page-category">Marketing & Sales</a>
                <span class="skill-page-author">by @etherdrake</span>
              </div>
              <h1 class="skill-page-title">china-market-gateway</h1>
              <p class="skill-page-desc">**Name:** `china-market-gateway`</p>
              <div class="vote-widget skill-page-vote" data-category-id="marketing-sales" data-tool-id="china-market-gateway">
                <button type="button" class="vote-btn" data-vote="1" aria-label="Upvote china-market-gateway">‚ñ≤</button>
                <span class="vote-count">New</span>
                <button type="button" class="vote-btn" data-vote="-1" aria-label="Downvote china-market-gateway">‚ñº</button>
              </div>
            </div>
          </section>
          <div class="skill-page-body">
            <article class="skill-page-content">
              <div class="skill-source-wrapper">
                <div class="skill-source-header">
                  <div class="skill-source-title">Source Code</div>
                  <button class="copy-btn" onclick="copySkillContent(this)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                    Copy
                  </button>
                </div>
                <div class="markdown-content">
                  <h1>China Market Gateway Skill</h1>
<p><strong>Name:</strong> <code>china-market-gateway</code><br><strong>Description:</strong> Umbrella skill for retrieving Chinese finance data (A-shares, HK, funds, economic data) using Python. Pull stock prices, fund data, market news, and macro indicators from Eastmoney, Sina, CLS, Baidu, and other Chinese sources. Use when researching Chinese equities, mainland stock prices, HK market data, fund performance, or China-related financial news and economic indicators.<br><strong>License:</strong> MIT<br><strong>Compatibility:</strong> Requires Python 3.8+, network access to Chinese financial websites. May require proxy for regions with restricted access.  </p>
<p><strong>Metadata:</strong></p>
<ul>
<li><strong>Author:</strong> Etherdrake</li>
<li><strong>Version:</strong> 1.0.2</li>
<li><strong>Supported Markets:</strong>  <ul>
<li>A-shares  </li>
<li>HK  </li>
<li>Shanghai  </li>
<li>Shenzhen  </li>
<li>Fund  </li>
<li>Macro</li>
</ul>
</li>
</ul>
<h1>YuanData - Chinese Finance Data Retrieval (Python)</h1>
<h2>When to Use This Skill</h2>
<p>Use this skill when you need to:</p>
<ul>
<li>Get real-time or historical stock prices for Chinese A-shares (Shanghai/Shenzhen)</li>
<li>Retrieve Hong Kong (HK) stock data</li>
<li>Search for Chinese company financial news</li>
<li>Research mainland China market information</li>
<li>Access Baidu Gushitong for stock analysis</li>
<li>Pull fund data and net asset values</li>
<li>Fetch macroeconomic indicators (GDP, CPI, PPI, PMI)</li>
<li>Track investment calendars and economic events</li>
</ul>
<h2>Supported Sources</h2>
<table>
<thead>
<tr>
<th>Source</th>
<th>URL Pattern</th>
<th>Coverage</th>
</tr>
</thead>
<tbody><tr>
<td>Eastmoney</td>
<td><code>https://quote.eastmoney.com/{stockCode}.html</code></td>
<td>A-shares, HK, indices</td>
</tr>
<tr>
<td>Sina Finance</td>
<td><code>https://finance.sina.com.cn/realstock/company/{stockCode}/nc.shtml</code></td>
<td>A-shares, HK, US</td>
</tr>
<tr>
<td>CLS (Ë¥¢ËÅîÁ§æ)</td>
<td><code>https://www.cls.cn/searchPage</code></td>
<td>Market news, telegraph</td>
</tr>
<tr>
<td>Baidu Gushitong</td>
<td><code>https://gushitong.baidu.com/stock/ab-{stockCode}</code></td>
<td>Stock analysis, quotes</td>
</tr>
<tr>
<td>Eastmoney Funds</td>
<td><code>https://fund.eastmoney.com/{fundCode}.html</code></td>
<td>Fund data</td>
</tr>
<tr>
<td>Eastmoney Macro</td>
<td><code>https://datacenter-web.eastmoney.com/api/data/v1/get</code></td>
<td>GDP, CPI, PPI, PMI</td>
</tr>
</tbody></table>
<h2>Stock Code Formats</h2>
<p>Chinese stocks use specific prefixes:</p>
<ul>
<li><strong>A-shares (Shanghai):</strong> <code>sh000001</code> (SSE), <code>sh600000</code> (SSE)</li>
<li><strong>A-shares (Shenzhen):</strong> <code>sz000001</code> (SZSE), <code>sz300000</code> (ChiNext)</li>
<li><strong>HK stocks:</strong> <code>hk00001</code> (HKEX), <code>hk00700</code> (Tencent)</li>
<li><strong>US ADRs (for reference):</strong> <code>usAAPL</code></li>
</ul>
<h3>Examples</h3>
<table>
<thead>
<tr>
<th>Stock Code</th>
<th>Company</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td><code>sh000001</code></td>
<td>Shanghai Composite Index</td>
<td>Index</td>
</tr>
<tr>
<td><code>sh600519</code></td>
<td>Kweichow Moutai</td>
<td>A-share</td>
</tr>
<tr>
<td><code>sz000001</code></td>
<td>Ping An Bank</td>
<td>A-share</td>
</tr>
<tr>
<td><code>hk00700</code></td>
<td>Tencent</td>
<td>HK</td>
</tr>
<tr>
<td><code>hk09660</code></td>
<td>Horizon Robotics</td>
<td>HK</td>
</tr>
</tbody></table>
<h1>Part 2: Fund Data Retrieval (Python)</h1>
<h2>7. Eastmoney Fund API</h2>
<pre><code class="language-python">class EastmoneyFundAPI:
    &quot;&quot;&quot;Eastmoney Fund Data Retrieval&quot;&quot;&quot;

    def __init__(self, yuan_data: YuanData):
        self.parent = yuan_data

    def get_fund_quote(self, fund_code: str) -&gt; Optional[Dict]:
        &quot;&quot;&quot;Get latest fund NAV and estimate&quot;&quot;&quot;
        url = f&quot;https://fundgz.1234567.com.cn/js/{fund_code}.js&quot;
        headers = {&#39;Referer&#39;: &#39;https://fund.eastmoney.com/&#39;}
        response = self.parent._request(url, headers=headers)
        if not response or &#39;jsonpgz&#39; not in response.text: return None

        try:
            json_str = response.text.replace(&#39;jsonpgz(&#39;, &#39;&#39;).rstrip(&#39;);&#39;)
            data = json.loads(json_str)
            return {
                &#39;code&#39;: data.get(&#39;fundcode&#39;),
                &#39;name&#39;: data.get(&#39;name&#39;),
                &#39;nav&#39;: float(data.get(&#39;dwjz&#39;, 0)),
                &#39;nav_date&#39;: data.get(&#39;jzrq&#39;),
                &#39;estimated_nav&#39;: float(data.get(&#39;gsz&#39;, 0)),
                &#39;estimated_nav_time&#39;: data.get(&#39;gztime&#39;),
                &#39;growth_rate&#39;: float(data.get(&#39;zzf&#39;, 0)),
            }
        except Exception as e:
            logger.error(f&quot;Fund data parse failed: {e}&quot;)
            return None

    def get_fund_details(self, fund_code: str) -&gt; Optional[Dict]:
        &quot;&quot;&quot;Get detailed fund info via HTML scraping&quot;&quot;&quot;
        url = f&quot;https://fund.eastmoney.com/{fund_code}.html&quot;
        response = self.parent._request(url)
        if not response: return None

        soup = BeautifulSoup(response.text, &#39;html.parser&#39;)
        try:
            details = {&#39;code&#39;: fund_code}
            title_elem = soup.find(&#39;div&#39;, class_=&#39;fundDetail-tit&#39;)
            if title_elem:
                details[&#39;name&#39;] = title_elem.text.strip()

            info_table = soup.find(&#39;table&#39;, class_=&#39;infoOfFund&#39;)
            if info_table:
                for row in info_table.find_all(&#39;tr&#39;):
                    cells = row.find_all(&#39;td&#39;)
                    text = [c.text.strip() for c in cells]
                    if &#39;Âü∫ÈáëÁ±ªÂûã&#39; in text:
                        idx = text.index(&#39;Âü∫ÈáëÁ±ªÂûã&#39;); details[&#39;fund_type&#39;] = text[idx + 1]
                    elif &#39;ÊàêÁ´ãÊó•Êúü&#39; in text:
                        idx = text.index(&#39;ÊàêÁ´ãÊó•Êúü&#39;); details[&#39;establishment_date&#39;] = text[idx + 1]
                    elif &#39;Âü∫ÈáëÁªèÁêÜ&#39; in text:
                        idx = text.index(&#39;Âü∫ÈáëÁªèÁêÜ&#39;); details[&#39;manager&#39;] = text[idx + 1]
            return details
        except Exception as e:
            logger.error(f&quot;Fund details parse failed: {e}&quot;)
            return None
</code></pre>
<hr>
<h1>Part 3: Economic Data Retrieval (Python)</h1>
<h2>8. Eastmoney Economic Data API</h2>
<pre><code class="language-python">class EastmoneyMacroAPI:
    &quot;&quot;&quot;Eastmoney Macroeconomic Data API&quot;&quot;&quot;

    BASE_URL = &quot;https://datacenter-web.eastmoney.com/api/data/v1/get&quot;

    def __init__(self, yuan_data: YuanData):
        self.parent = yuan_data

    def _fetch_macro_data(self, params: Dict) -&gt; List[Dict]:
        &quot;&quot;&quot;Fetch and parse JSONP macro data&quot;&quot;&quot;
        headers = {
            &#39;Host&#39;: &#39;datacenter-web.eastmoney.com&#39;,
            &#39;Origin&#39;: &#39;https://datacenter.eastmoney.com&#39;,
            &#39;Referer&#39;: &#39;https://data.eastmoney.com/cjsj/&#39;
        }
        response = self.parent._request(self.BASE_URL, headers=headers, params=params)
        if not response: return []

        try:
            text = response.text
            if text.startswith(&#39;data(&#39;):
                json_str = re.sub(r&#39;^data\(|\);$&#39;, &#39;&#39;, text)
                data = json.loads(json_str)
                return data.get(&#39;data&#39;, {}).get(&#39;result&#39;, {}).get(&#39;data&#39;, [])
            return []
        except Exception as e:
            logger.error(f&quot;Macro data parse failed: {e}&quot;)
            return []

    def get_gdp_data(self, page_size: int = 20) -&gt; List[Dict]:
        &quot;&quot;&quot;Get GDP data&quot;&quot;&quot;
        params = {
            &#39;callback&#39;: &#39;data&#39;,
            &#39;columns&#39;: &#39;REPORT_DATE,TIME,DOMESTICL_PRODUCT_BASE,FIRST_PRODUCT_BASE,SECOND_PRODUCT_BASE,THIRD_PRODUCT_BASE,SUM_SAME,FIRST_SAME,SECOND_SAME,THIRD_SAME&#39;,
            &#39;pageNumber&#39;: 1,
            &#39;pageSize&#39;: page_size,
            &#39;sortColumns&#39;: &#39;REPORT_DATE&#39;,
            &#39;sortTypes&#39;: -1,
            &#39;source&#39;: &#39;WEB&#39;,
            &#39;client&#39;: &#39;WEB&#39;,
            &#39;reportName&#39;: &#39;RPT_ECONOMY_GDP&#39;,
        }
        return self._fetch_macro_data(params)

    def get_cpi_data(self, page_size: int = 20) -&gt; List[Dict]:
        &quot;&quot;&quot;Get CPI data&quot;&quot;&quot;
        params = {
            &#39;callback&#39;: &#39;data&#39;,
            &#39;columns&#39;: &#39;REPORT_DATE,TIME,NATIONAL_SAME,NATIONAL_BASE,NATIONAL_SEQUENTIAL,NATIONAL_ACCUMULATE,CITY_SAME,CITY_BASE,CITY_SEQUENTIAL,CITY_ACCUMULATE,RURAL_SAME,RURAL_BASE,RURAL_SEQUENTIAL,RURAL_ACCUMULATE&#39;,
            &#39;pageNumber&#39;: 1,
            &#39;pageSize&#39;: page_size,
            &#39;sortColumns&#39;: &#39;REPORT_DATE&#39;,
            &#39;sortTypes&#39;: -1,
            &#39;source&#39;: &#39;WEB&#39;,
            &#39;client&#39;: &#39;WEB&#39;,
            &#39;reportName&#39;: &#39;RPT_ECONOMY_CPI&#39;,
        }
        return self._fetch_macro_data(params)

    def get_ppi_data(self, page_size: int = 20) -&gt; List[Dict]:
        &quot;&quot;&quot;Get PPI data&quot;&quot;&quot;
        params = {
            &#39;callback&#39;: &#39;data&#39;,
            &#39;columns&#39;: &#39;REPORT_DATE,TIME,BASE,BASE_SAME,BASE_ACCUMULATE&#39;,
            &#39;pageNumber&#39;: 1,
            &#39;pageSize&#39;: page_size,
            &#39;sortColumns&#39;: &#39;REPORT_DATE&#39;,
            &#39;sortTypes&#39;: -1,
            &#39;source&#39;: &#39;WEB&#39;,
            &#39;client&#39;: &#39;WEB&#39;,
            &#39;reportName&#39;: &#39;RPT_ECONOMY_PPI&#39;,
        }
        return self._fetch_macro_data(params)

    def get_pmi_data(self, page_size: int = 20) -&gt; List[Dict]:
        &quot;&quot;&quot;Get PMI data&quot;&quot;&quot;
        params = {
            &#39;callback&#39;: &#39;data&#39;,
            &#39;columns&#39;: &#39;REPORT_DATE,TIME,MAKE_INDEX,MAKE_SAME,NMAKE_INDEX,NMAKE_SAME&#39;,
            &#39;pageNumber&#39;: 1,
            &#39;pageSize&#39;: page_size,
            &#39;sortColumns&#39;: &#39;REPORT_DATE&#39;,
            &#39;sortTypes&#39;: -1,
            &#39;source&#39;: &#39;WEB&#39;,
            &#39;client&#39;: &#39;WEB&#39;,
            &#39;reportName&#39;: &#39;RPT_ECONOMY_PMI&#39;,
        }
        return self._fetch_macro_data(params)
</code></pre>
<h2>9. Investment Calendar API</h2>
<pre><code class="language-python">class InvestmentCalendarAPI:
    &quot;&quot;&quot;Investment Calendar and Economic Events&quot;&quot;&quot;

    BASE_URL = &quot;https://app.jiuyangongshe.com/jystock-app/api/v1/timeline/list&quot;

    def __init__(self, yuan_data: YuanData):
        self.parent = yuan_data

    def get_calendar(self, year_month: Optional[str] = None) -&gt; List[Dict]:
        &quot;&quot;&quot;Get economic events calendar&quot;&quot;&quot;
        if not year_month:
            year_month = datetime.now().strftime(&#39;%Y-%m&#39;)

        headers = {
            &#39;Host&#39;: &#39;app.jiuyangongshe.com&#39;,
            &#39;Origin&#39;: &#39;https://www.jiuyangongshe.com&#39;,
            &#39;Referer&#39;: &#39;https://www.jiuyangongshe.com/&#39;,
            &#39;Content-Type&#39;: &#39;application/json&#39;,
            &#39;token&#39;: &#39;1cc6380a05c652b922b3d85124c85473&#39;,
            &#39;platform&#39;: &#39;3&#39;,
            &#39;Cookie&#39;: &#39;SESSION=NDZkNDU2ODYtODEwYi00ZGZkLWEyY2ItNjgxYzY4ZWMzZDEy&#39;,
            &#39;timestamp&#39;: str(int(time.time() * 1000)),
        }

        try:
            response = self.parent.session.post(
                self.BASE_URL,
                headers=headers,
                json={&#39;date&#39;: year_month, &#39;grade&#39;: &#39;0&#39;},
                timeout=30
            )
            return response.json().get(&#39;data&#39;, []) if response.status_code == 200 else []
        except Exception as e:
            logger.error(f&quot;Calendar fetch failed: {e}&quot;)
            return []
</code></pre>
<hr>
<h1>Part 4: Unified Data Access Class</h1>
<h2>10. YuanData Main Class</h2>
<pre><code class="language-python">class YuanData:
    &quot;&quot;&quot;Unified Chinese Finance Data Access Class&quot;&quot;&quot;

    def __init__(self, proxy: Optional[str] = None):
        self.proxy = proxy
        self.session = requests.Session()
        self.headers = {
            &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&#39;,
            &#39;Accept&#39;: &#39;application/json, text/html&#39;,
        }
        if proxy:
            self.session.proxies = {&#39;http&#39;: proxy, &#39;https&#39;: proxy}

        # Initialize API clients
        self.stock = _StockAPI(self)
        self.fund = _FundAPI(self)
        self.macro = _MacroAPI(self)
        self.news = _NewsAPI(self)

    def _request(self, url: str, headers: Optional[Dict] = None,
                 params: Optional[Dict] = None, timeout: int = 30) -&gt; Optional[Any]:
        &quot;&quot;&quot;Generic HTTP request&quot;&quot;&quot;
        try:
            final_headers = {**self.headers, **(headers or {})}
            response = self.session.get(url, headers=final_headers, params=params, timeout=timeout)
            response.raise_for_status()
            return response
        except Exception as e:
            logger.error(f&quot;Request failed: {url} - {e}&quot;)
            return None

# Internal API wrappers
class _StockAPI:
    def __init__(self, parent): self.parent = parent
    def get_quote(self, code: str) -&gt; Optional[Dict]:
        url = f&quot;http://hq.sinajs.cn/list={code}&quot;
        headers = {&#39;Host&#39;: &#39;hq.sinajs.cn&#39;, &#39;Referer&#39;: &#39;https://finance.sina.com.cn/&#39;}
        response = self.parent._request(url, headers=headers)
        return {&#39;code&#39;: code, &#39;source&#39;: &#39;sina&#39;} if response else None

class _FundAPI:
    def __init__(self, parent): self.parent = parent
    def get_quote(self, code: str) -&gt; Optional[Dict]:
        url = f&quot;https://fundgz.1234567.com.cn/js/{code}.js&quot;
        response = self.parent._request(url, headers={&#39;Referer&#39;: &#39;https://fund.eastmoney.com/&#39;})
        return {&#39;code&#39;: code, &#39;source&#39;: &#39;fund&#39;} if response else None

class _MacroAPI:
    def __init__(self, parent): self.parent = parent
    def get_gdp(self) -&gt; List[Dict]:
        return []
    def get_cpi(self) -&gt; List[Dict]:
        return []

class _NewsAPI:
    def __init__(self, parent): self.parent = parent
    def search(self, keyword: str) -&gt; List[Dict]:
        return []

# Convenience functions
def get_stock_price(stock_code: str, proxy: Optional[str] = None) -&gt; Optional[Dict]:
    &quot;&quot;&quot;Get real-time stock price&quot;&quot;&quot;
    data = YuanData(proxy)
    return data.stock.get_quote(stock_code)

def get_fund_nav(fund_code: str, proxy: Optional[str] = None) -&gt; Optional[Dict]:
    &quot;&quot;&quot;Get fund NAV&quot;&quot;&quot;
    data = YuanData(proxy)
    return data.fund.get_quote(fund_code)

def get_gdp_data(proxy: Optional[str] = None) -&gt; List[Dict]:
    &quot;&quot;&quot;Get GDP data&quot;&quot;&quot;
    data = YuanData(proxy)
    return data.macro.get_gdp()

def get_cpi_data(proxy: Optional[str] = None) -&gt; List[Dict]:
    &quot;&quot;&quot;Get CPI data&quot;&quot;&quot;
    data = YuanData(proxy)
    return data.macro.get_cpi()
</code></pre>
<hr>
<h1>Part 5: Handling Tickers That Don&#39;t Return Data</h1>
<h2>11. Troubleshooting Guide (Python)</h2>
<pre><code class="language-python">class DataTroubleshooter:
    &quot;&quot;&quot;Diagnose why tickers return no data&quot;&quot;&quot;

    @staticmethod
    def check_hk_format(stock_code: str) -&gt; str:
        &quot;&quot;&quot;Fix HK stock format (e.g., &#39;hk2259&#39; ‚Üí &#39;hk02259&#39;)&quot;&quot;&quot;
        if stock_code.startswith(&#39;hk&#39;) and len(stock_code) == 6:
            return &#39;hk0&#39; + stock_code[2:]
        return stock_code

    @staticmethod
    def check_baidu_exists(stock_code: str, proxy: Optional[str] = None) -&gt; bool:
        &quot;&quot;&quot;Verify Baidu Gushitong has data for this stock&quot;&quot;&quot;
        url = f&quot;https://gushitong.baidu.com/stock/ab-{stock_code}&quot;
        data = YuanData(proxy)
        response = data._request(url)
        return response is not None and response.status_code == 200

def troubleshoot_ticker(stock_code: str, proxy: Optional[str] = None) -&gt; Dict:
    &quot;&quot;&quot;Diagnose missing ticker data&quot;&quot;&quot;
    results = {
        &#39;original_code&#39;: stock_code,
        &#39;tests&#39;: []
    }

    # Format check
    corrected = DataTroubleshooter.check_hk_format(stock_code)
    results[&#39;corrected_code&#39;] = corrected
    results[&#39;tests&#39;].append({
        &#39;test&#39;: &#39;format_correction&#39;,
        &#39;input&#39;: stock_code,
        &#39;output&#39;: corrected,
        &#39;changed&#39;: stock_code != corrected
    })

    # Sina test
    sina_success = get_stock_price(corrected, proxy) is not None
    results[&#39;tests&#39;].append({
        &#39;test&#39;: &#39;sina_api&#39;,
        &#39;result&#39;: sina_success
    })

    # Baidu site check
    baidu_available = DataTroubleshooter.check_baidu_exists(corrected, proxy)
    results[&#39;tests&#39;].append({
        &#39;test&#39;: &#39;baidu_page_exists&#39;,
        &#39;result&#39;: baidu_available
    })

    # Recommendation
    if sina_success:
        results[&#39;recommendation&#39;] = &#39;USE_CORRECTED_CODE&#39;
    elif baidu_available:
        results[&#39;recommendation&#39;] = &#39;CHECK_MANUALLY&#39;
    else:
        results[&#39;recommendation&#39;] = &#39;INACTIVE_OR_INVALID&#39;

    return results
</code></pre>
<hr>
<h1>Part 6: Common Stock Code Examples</h1>
<table>
<thead>
<tr>
<th>Company</th>
<th>A-Share Code</th>
<th>HK Code</th>
<th>Industry</th>
</tr>
</thead>
<tbody><tr>
<td>Kweichow Moutai</td>
<td>sh600519</td>
<td>-</td>
<td>Liquor</td>
</tr>
<tr>
<td>Tencent</td>
<td>-</td>
<td>hk00700</td>
<td>Internet</td>
</tr>
<tr>
<td>Alibaba</td>
<td>sh9988</td>
<td>hk9988</td>
<td>E-commerce</td>
</tr>
<tr>
<td>Meituan</td>
<td>sh3690</td>
<td>hk3690</td>
<td>Food Delivery</td>
</tr>
<tr>
<td>Ping An</td>
<td>sh601318</td>
<td>hk2318</td>
<td>Insurance</td>
</tr>
<tr>
<td>BYD</td>
<td>sh002594</td>
<td>hk1211</td>
<td>Electric Vehicles</td>
</tr>
<tr>
<td>China Merchants Bank</td>
<td>sh600036</td>
<td>hk3968</td>
<td>Banking</td>
</tr>
<tr>
<td>Industrial Bank</td>
<td>sh601166</td>
<td>-</td>
<td>Banking</td>
</tr>
</tbody></table>
<hr>
<h1>Part 7: Important Notes</h1>
<h3>Time Zone</h3>
<ul>
<li>China Standard Time (CST): <strong>UTC+8</strong></li>
<li>Trading Hours:<ul>
<li>Morning: <strong>9:30‚Äì11:30</strong></li>
<li>Afternoon: <strong>13:00‚Äì15:00</strong></li>
</ul>
</li>
<li>Lunch Break: <strong>11:30‚Äì13:00</strong></li>
</ul>
<h3>Currency</h3>
<ul>
<li><strong>A-shares:</strong> CNY (RMB)</li>
<li><strong>HK stocks:</strong> HKD</li>
<li>Approx rate: <strong>1 HKD ‚âà 0.89 CNY</strong></li>
</ul>
<h3>Market Holidays</h3>
<p>Closed on:</p>
<ul>
<li>Weekends (Saturday‚ÄìSunday)</li>
<li>Public holidays: <strong>Chinese New Year, National Day (Oct 1), Labor Day (May 1)</strong></li>
</ul>
<h3>Proxy Requirements</h3>
<ul>
<li>Consider using a <strong>CN-based proxy or VPS</strong> when accessing from outside China</li>
<li>Some sites block non-Chinese IPs</li>
</ul>
<hr>
<h1>Part 8: Usage Examples</h1>
<pre><code class="language-python"># Initialize with optional proxy
data = YuanData(proxy=&quot;http://localhost:10809&quot;)

# Get A-share quote (Kweichow Moutai)
quote = data.stock.get_quote(&quot;sh600519&quot;)
print(f&quot;Moutai: {quote}&quot;)

# Get HK quote (Tencent)
hk_quote = data.stock.get_quote(&quot;hk00700&quot;)
print(f&quot;Tencent: {hk_quote}&quot;)

# Get fund NAV
fund = data.fund.get_quote(&quot;161039&quot;)
print(f&quot;Fund NAV: {fund}&quot;)

# Get GDP data
gdp = data.macro.get_gdp()
print(f&quot;GDP: {gdp}&quot;)

# Search news
news = data.news.search(&quot;ËåÖÂè∞&quot;)
print(f&quot;News: {news}&quot;)

# Troubleshoot ticker
result = troubleshoot_ticker(&quot;hk2259&quot;)
print(f&quot;Troubleshoot: {result}&quot;)
</code></pre>

                </div>
              </div>
            </article>
            <aside class="skill-page-sidebar">
              <div class="sidebar-card">
                <div class="sidebar-title">Actions</div>
                <a href="https://github.com/openclaw/skills/tree/main/skills/etherdrake/china-market-gateway/SKILL.md" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-primary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
                  View on GitHub
                </a>
                <a href="https://clawdhub.com/etherdrake/china-market-gateway" target="_blank" rel="noopener" class="sidebar-btn sidebar-btn-clawdhub">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/><line x1="2" y1="12" x2="22" y2="12"/></svg>
                  View on ClawdHub
                </a>
                <a href="https://raw.githubusercontent.com/openclaw/skills/main/skills/etherdrake/china-market-gateway/SKILL.md" download="SKILL.md" class="sidebar-btn sidebar-btn-secondary">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  Download SKILL.md
                </a>
                <button onclick="sendToSecurityAuditor()" class="sidebar-btn sidebar-btn-security">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                  Security Check
                </button>
              </div>
              <div class="sidebar-card">
                <div class="sidebar-title">Details</div>
                <div class="sidebar-info">
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Author</span>
                    <span class="sidebar-info-value">@etherdrake</span>
                  </div>
                  <div class="sidebar-info-item">
                    <span class="sidebar-info-label">Category</span>
                    <span class="sidebar-info-value">Marketing & Sales</span>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        
  <footer class="footer">
    <div class="footer-inner">
      <p class="footer-text" style="margin-bottom: 8px;"><a href="https://github.com/neonone123/moltdirectory" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none;">View on GitHub</a></p>
      <p class="footer-text" style="opacity: 0.6; font-size: 13px;">OpenClawDirectory.com is a community-run project and is not affiliated with the official OpenClaw team or Peter Steinberger. We are just fans of the lobster.</p>
    </div>
  </footer>
  <script>
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      if (newTheme === 'light') {
        html.setAttribute('data-theme', 'light');
      } else {
        html.removeAttribute('data-theme');
      }
      localStorage.setItem('theme', newTheme);
    }
    
    function copySkillContent(btn) {
      const wrapper = btn.closest('.skill-source-wrapper');
      const content = wrapper.querySelector('.markdown-content');
      if (content) {
        const text = content.innerText || content.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.classList.add('copied');
          btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!';
          setTimeout(() => {
            btn.classList.remove('copied');
            btn.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg> Copy';
          }, 2000);
        });
      }
    }

    async function sendToSecurityAuditor() {
      try {
        const contentElement = document.querySelector('.markdown-content');
        if (!contentElement) throw new Error('Could not find markdown content');
        const skillContent = contentElement.innerText || contentElement.textContent;
        localStorage.setItem('skillAuditContent', skillContent);
        window.open('/security-auditor', '_blank'); 
      } catch (error) {
        alert('Error: ' + error.message);
      }
    }

    function updateVoteWidget(widget, toolData) {
      if (!widget || !toolData) return;
      const upBtn = widget.querySelector('[data-vote="1"]');
      const downBtn = widget.querySelector('[data-vote="-1"]');
      const countNode = widget.querySelector('.vote-count');
      widget.dataset.rankScore = String(toolData.rankScore ?? 0);
      widget.dataset.viewerVote = String(toolData.viewerVote ?? 0);

      if (countNode) {
        countNode.textContent = toolData.displayCount || 'New';
      }
      if (upBtn) {
        upBtn.classList.toggle('is-active', Number(toolData.viewerVote) === 1);
      }
      if (downBtn) {
        downBtn.classList.toggle('is-active', Number(toolData.viewerVote) === -1);
      }
    }

    function setWidgetBusy(widget, busy) {
      widget.dataset.busy = busy ? '1' : '0';
      widget.querySelectorAll('.vote-btn').forEach((btn) => {
        btn.disabled = busy;
      });
    }

    function applySortMode(grid, mode) {
      const cards = [...grid.querySelectorAll('.skill-card[data-tool-id]')];
      cards.sort((a, b) => {
        if (mode === 'community') {
          const scoreDiff = Number(b.dataset.rankScore || 0) - Number(a.dataset.rankScore || 0);
          if (scoreDiff !== 0) return scoreDiff;
        }
        return Number(a.dataset.originalIndex || 0) - Number(b.dataset.originalIndex || 0);
      });
      cards.forEach((card) => grid.appendChild(card));
    }

    function bindSortToggle(toolbar, grid) {
      const buttons = toolbar.querySelectorAll('.sort-toggle-btn');
      const status = toolbar.querySelector('.sort-status');
      buttons.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mode = btn.dataset.sortMode;
          buttons.forEach((b) => b.classList.toggle('is-active', b === btn));
          applySortMode(grid, mode);
          status.textContent = mode === 'community' ? 'Community ranking active' : 'Original order active';
        });
      });
    }

    async function fetchScores(categoryId, toolIds) {
      const params = new URLSearchParams({
        categoryId,
        toolIds: toolIds.join(',')
      });
      const response = await fetch('/api/v1/scores?' + params.toString(), {
        method: 'GET',
        credentials: 'same-origin'
      });
      if (!response.ok) {
        throw new Error('Unable to fetch vote scores');
      }
      return response.json();
    }

    async function submitVote(widget, voteValue) {
      const categoryId = widget.dataset.categoryId;
      const toolId = widget.dataset.toolId;
      setWidgetBusy(widget, true);
      try {
        const response = await fetch('/api/v1/vote', {
          method: 'POST',
          credentials: 'same-origin',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            categoryId,
            toolId,
            vote: voteValue
          })
        });
        const payload = await response.json().catch(() => ({}));
        if (!response.ok) {
          throw new Error(payload.error || 'Vote request failed');
        }
        if (payload.tool) {
          updateVoteWidget(widget, payload.tool);
          const card = widget.closest('.skill-card[data-tool-id]');
          if (card) {
            card.dataset.rankScore = String(payload.tool.rankScore ?? 0);
          }
        }
      } catch (error) {
        console.error(error);
      } finally {
        setWidgetBusy(widget, false);
      }
    }

    document.addEventListener('DOMContentLoaded', async () => {
      const widgets = [...document.querySelectorAll('.vote-widget[data-category-id][data-tool-id]')];
      if (widgets.length === 0) return;

      const grouped = new Map();
      widgets.forEach((widget) => {
        const key = widget.dataset.categoryId;
        if (!grouped.has(key)) grouped.set(key, new Map());
        grouped.get(key).set(widget.dataset.toolId, widget);
      });

      for (const [categoryId, widgetMap] of grouped.entries()) {
        const toolIds = [...widgetMap.keys()];
        try {
          const data = await fetchScores(categoryId, toolIds);
          const byTool = new Map((data.tools || []).map((tool) => [tool.toolId, tool]));
          for (const [toolId, widget] of widgetMap.entries()) {
            const toolData = byTool.get(toolId);
            if (toolData) {
              updateVoteWidget(widget, toolData);
              const card = widget.closest('.skill-card[data-tool-id]');
              if (card) {
                card.dataset.rankScore = String(toolData.rankScore ?? 0);
              }
            }
          }
        } catch (error) {
          console.error(error);
        }
      }

      widgets.forEach((widget) => {
        widget.querySelectorAll('.vote-btn').forEach((btn) => {
          btn.addEventListener('click', (event) => {
            event.preventDefault();
            event.stopPropagation();
            if (widget.dataset.busy === '1') return;
            const voteValue = Number(btn.dataset.vote);
            submitVote(widget, voteValue).then(() => {
              const grid = widget.closest('.skills-grid[data-category-id]');
              const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + widget.dataset.categoryId + '"]');
              const communityBtn = toolbar ? toolbar.querySelector('.sort-toggle-btn[data-sort-mode="community"]') : null;
              if (grid && communityBtn && communityBtn.classList.contains('is-active')) {
                applySortMode(grid, 'community');
              }
            });
          });
        });
      });

      document.querySelectorAll('.skills-grid[data-category-id]').forEach((grid) => {
        const categoryId = grid.dataset.categoryId;
        const toolbar = document.querySelector('.sort-toolbar[data-category-id="' + categoryId + '"]');
        if (!toolbar) return;
        bindSortToggle(toolbar, grid);
        applySortMode(grid, 'community');
      });
    });
  </script>
</body>
</html>